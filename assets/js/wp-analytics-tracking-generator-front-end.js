;(function($) {
"use strict";

function wpAnalyticsCheckAnalyticsVersion() {
  var version = '';

  if ('undefined' !== typeof analytics_tracking_settings && 'undefined' !== typeof analytics_tracking_settings.analytics_type) {
    if ('gtagjs' === analytics_tracking_settings.analytics_type && 'function' === typeof gtag) {
      version = 'gtag';
    } else if ('analyticsjs' === analytics_tracking_settings.analytics_type && 'function' === typeof ga) {
      version = 'ga';
    }
  }

  return version;
}
/*
 * call hooks from other plugins or themes
 *
 */


if (typeof wp !== 'undefined') {
  wp.hooks.addAction('wpAnalyticsTrackingGeneratorEvent', 'wpAnalyticsTrackingGenerator', wpAnalyticsTrackingEvent, 10);
  wp.hooks.addAction('wpAnalyticsTrackingGeneratorEcommerceAction', 'wpAnalyticsTrackingGenerator', wpAnalyticsTrackingEcommerceAction, 10);
}
/*
 * Create a Google Analytics event
 * category: Event Category
 * label: Event Label
 * action: Event Action
 * value: optional
 */


function wpAnalyticsTrackingEvent(type, category, action, label, value, non_interaction) {
  var version = wpAnalyticsCheckAnalyticsVersion();

  if ('gtag' === version) {
    // Sends the event to the Google Analytics property with
    // tracking ID GA_MEASUREMENT_ID set by the config command in
    // the global tracking snippet.
    // example: gtag('event', 'play', { 'event_category': 'Videos', 'event_label': 'Fall Campaign' });
    var params = {
      event_category: category,
      event_label: label
    };

    if ('undefined' !== typeof value) {
      params.value = value;
    }

    if ('undefined' !== typeof non_interaction) {
      params.non_interaction = non_interaction;
    }

    gtag(type, action, params);
  } else if ('ga' === version) {
    // Uses the default tracker to send the event to the
    // Google Analytics property with tracking ID GA_MEASUREMENT_ID.
    // example: ga('send', 'event', 'Videos', 'play', 'Fall Campaign');
    // noninteraction seems to have been working like this in analytics.js.
    if (non_interaction == 1) {
      value = {
        nonInteraction: 1
      };
    }

    if ('undefined' === typeof value) {
      ga('send', type, category, action, label);
    } else {
      ga('send', type, category, action, label, value);
    }
  }
}
/*
 * Create a Google Analytics Ecommerce action
 *
 */


function wpAnalyticsTrackingEcommerceAction(type, action, product, step) {
  var version = wpAnalyticsCheckAnalyticsVersion();

  if ('gtag' === version) {
    gtag(type, action, {
      items: [product]
    });
  } else if ('ga' === version) {
    ga('require', 'ec');
    ga('ec:addProduct', product);

    switch (action) {
      case 'select_content':
        ga('ec:setAction', 'detail');
        break;

      case 'add_to_cart':
        ga('ec:setAction', 'add');
        break;

      case 'begin_checkout':
        ga('ec:setAction', 'checkout', {
          step: step
        });
        break;

      default:
    }
  }
}

function wpAnalyticsTrackingSetup() {
  var version = wpAnalyticsCheckAnalyticsVersion();

  if ('' === version) {
    return;
  } // settings for ScrollDepth plugin


  if ('undefined' !== typeof analytics_scrolldepth_settings.scroll && true === analytics_scrolldepth_settings.scroll.enabled) {
    var scrollDepthSettings = []; // this needs to be true, regardless, because otherwise the assumption is that the tracking is defined in Google Tag Manager.
    // todo: it might be worth building a setting for this.

    scrollDepthSettings.gtmOverride = true; // if we're using ga, we need to tell the plugin

    if ('gtag' !== version) {
      scrollDepthSettings.gaGlobal = 'ga';
    } // value is a string


    if ('undefined' !== typeof analytics_scrolldepth_settings.scroll.minimum_height && '0' !== analytics_scrolldepth_settings.scroll.minimum_height) {
      scrollDepthSettings.minimum_height = analytics_scrolldepth_settings.scroll.minimum_height;
    } // value is a boolean. default is true.


    if ('undefined' !== typeof analytics_scrolldepth_settings.scroll.percentage && 'true' !== analytics_scrolldepth_settings.scroll.percentage) {
      scrollDepthSettings.percentage = false;
    } // value is a boolean. default is true.


    if ('undefined' !== typeof analytics_scrolldepth_settings.scroll.user_timing && 'true' !== analytics_scrolldepth_settings.scroll.user_timing) {
      scrollDepthSettings.user_timing = false;
    } // value is a boolean. default is true.


    if ('undefined' !== typeof analytics_scrolldepth_settings.scroll.pixel_depth && 'true' !== analytics_scrolldepth_settings.scroll.user_timing) {
      scrollDepthSettings.pixel_depth = false;
    } // value is a boolean. default is true.


    if ('undefined' !== typeof analytics_scrolldepth_settings.scroll.non_interaction && 'true' !== analytics_scrolldepth_settings.scroll.non_interaction) {
      scrollDepthSettings.non_interaction = false;
    } // value is an array. default is empty.


    if ('undefined' !== typeof analytics_scrolldepth_settings.scroll.scroll_elements) {
      scrollDepthSettings.elements = $.map(analytics_scrolldepth_settings.scroll.scroll_elements.split(','), $.trim);
    } // send scroll settings to the scrolldepth plugin


    if ('undefined' !== typeof analytics_scrolldepth_settings.scroll.use_jquery && true === analytics_scrolldepth_settings.scroll.use_jquery) {
      jQuery.scrollDepth(scrollDepthSettings);
    } else {
      gascrolldepth.init(scrollDepthSettings);
    }
  }

  if ('undefined' !== typeof analytics_tracking_settings.special && true === analytics_tracking_settings.special.enabled) {
    // external links
    $('a[href^="http"]:not([href*="://' + document.domain + '"])').click(function () {
      wpAnalyticsTrackingEvent('event', 'Outbound links', 'Click', this.href);
    }); // mailto links

    $('a[href^="mailto"]').click(function () {
      wpAnalyticsTrackingEvent('event', 'Mails', 'Click', this.href.substring(7));
    }); // tel links

    $('a[href^="tel"]').click(function () {
      wpAnalyticsTrackingEvent('event', 'Telephone', 'Call', this.href.substring(7));
    }); // internal links

    $('a:not([href^="(http:|https:)?//"],[href^="#"],[href^="mailto:"])').click(function () {
      // track downloads
      if ('' !== analytics_tracking_settings.special.download_regex) {
        var _url = this.href;
        var checkDownload = new RegExp('\\.(' + analytics_tracking_settings.special.download_regex + ')([?#].*)?$', 'i');
        var isDownload = checkDownload.test(_url);

        if (true === isDownload) {
          var checkDownloadExtension = new RegExp('\\.(' + analytics_tracking_settings.special.download_regex + ')([?#].*)?$', 'i');
          var extensionResult = checkDownloadExtension.exec(_url);
          var extension = '';

          if (null !== extensionResult) {
            extension = extensionResult[1];
          } else {
            extension = extensionResult;
          } // we can't use the url for the value here, even though that would be nice, because value is supposed to be an integer


          wpAnalyticsTrackingEvent('event', 'Downloads', extension, this.href);
        }
      }
    });
  }

  if ('undefined' !== typeof analytics_tracking_settings.affiliate && true === analytics_tracking_settings.affiliate.enabled) {
    // any link could be an affiliate, i guess?
    $('a').click(function () {
      // track affiliates
      if ('' !== analytics_tracking_settings.affiliate.affiliate_regex) {
        var checkAffiliate = new RegExp('\\.(' + analytics_tracking_settings.affiliate.affiliate_regex + ')([?#].*)?$', 'i');
        var isAffiliate = checkAffiliate.test(url);

        if (true === isAffiliate) {
          wpAnalyticsTrackingEvent('event', 'Affiliate', 'Click', this.href);
        }
      }
    });
  } // link fragments as pageviews
  // does not use the event tracking method; flags a pageview instead.


  if ('undefined' !== typeof analytics_tracking_settings.fragment && true === analytics_tracking_settings.fragment.enabled) {
    window.onhashchange = function (event) {
      var fragment_url = location.pathname + location.search + location.hash;

      if ('gtag' === version) {
        gtag('set', 'page_path', fragment_url);
        gtag('event', 'page_view');
      } else if ('ga' === version) {
        ga('send', 'pageview', fragment_url);
      }
    };
  } // when a button is clicked, attach it to the form's data


  $('input[type="submit"], button[type="submit"]').on('click', function () {
    var form = $(this).parents('form:first');
    $(form).data('button', this);
  }); // basic form submits. track submit instead of click because otherwise it's weird.

  if ('undefined' !== typeof analytics_tracking_settings.form_submissions && true === analytics_tracking_settings.form_submissions.enabled) {
    $('form').submit(function (f) {
      var button = $(this).data('button') || $('input[type="submit"], button[type="submit"]').get(0);
      var category = $(button).data('ga-category') || 'Form';
      var action = $(button).data('ga-action') || 'Submit';
      var label = $(button).data('ga-label') || $(button).text() || button.value || button.name;
      wpAnalyticsTrackingEvent('event', category, action, label);
    });
  }
}

$(document).ready(function () {
  wpAnalyticsTrackingSetup();
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndwLWV2ZW50LXRyYWNraW5nLmpzIl0sIm5hbWVzIjpbIndwQW5hbHl0aWNzQ2hlY2tBbmFseXRpY3NWZXJzaW9uIiwidmVyc2lvbiIsImFuYWx5dGljc190cmFja2luZ19zZXR0aW5ncyIsImFuYWx5dGljc190eXBlIiwiZ3RhZyIsImdhIiwid3AiLCJob29rcyIsImFkZEFjdGlvbiIsIndwQW5hbHl0aWNzVHJhY2tpbmdFdmVudCIsIndwQW5hbHl0aWNzVHJhY2tpbmdFY29tbWVyY2VBY3Rpb24iLCJ0eXBlIiwiY2F0ZWdvcnkiLCJhY3Rpb24iLCJsYWJlbCIsInZhbHVlIiwibm9uX2ludGVyYWN0aW9uIiwicGFyYW1zIiwiZXZlbnRfY2F0ZWdvcnkiLCJldmVudF9sYWJlbCIsIm5vbkludGVyYWN0aW9uIiwicHJvZHVjdCIsInN0ZXAiLCJpdGVtcyIsIndwQW5hbHl0aWNzVHJhY2tpbmdTZXR1cCIsImFuYWx5dGljc19zY3JvbGxkZXB0aF9zZXR0aW5ncyIsInNjcm9sbCIsImVuYWJsZWQiLCJzY3JvbGxEZXB0aFNldHRpbmdzIiwiZ3RtT3ZlcnJpZGUiLCJnYUdsb2JhbCIsIm1pbmltdW1faGVpZ2h0IiwicGVyY2VudGFnZSIsInVzZXJfdGltaW5nIiwicGl4ZWxfZGVwdGgiLCJzY3JvbGxfZWxlbWVudHMiLCJlbGVtZW50cyIsIiQiLCJtYXAiLCJzcGxpdCIsInRyaW0iLCJ1c2VfanF1ZXJ5IiwialF1ZXJ5Iiwic2Nyb2xsRGVwdGgiLCJnYXNjcm9sbGRlcHRoIiwiaW5pdCIsInNwZWNpYWwiLCJkb2N1bWVudCIsImRvbWFpbiIsImNsaWNrIiwiaHJlZiIsInN1YnN0cmluZyIsImRvd25sb2FkX3JlZ2V4IiwidXJsIiwiY2hlY2tEb3dubG9hZCIsIlJlZ0V4cCIsImlzRG93bmxvYWQiLCJ0ZXN0IiwiY2hlY2tEb3dubG9hZEV4dGVuc2lvbiIsImV4dGVuc2lvblJlc3VsdCIsImV4ZWMiLCJleHRlbnNpb24iLCJhZmZpbGlhdGUiLCJhZmZpbGlhdGVfcmVnZXgiLCJjaGVja0FmZmlsaWF0ZSIsImlzQWZmaWxpYXRlIiwiZnJhZ21lbnQiLCJ3aW5kb3ciLCJvbmhhc2hjaGFuZ2UiLCJldmVudCIsImZyYWdtZW50X3VybCIsImxvY2F0aW9uIiwicGF0aG5hbWUiLCJzZWFyY2giLCJoYXNoIiwib24iLCJmb3JtIiwicGFyZW50cyIsImRhdGEiLCJmb3JtX3N1Ym1pc3Npb25zIiwic3VibWl0IiwiZiIsImJ1dHRvbiIsImdldCIsInRleHQiLCJuYW1lIiwicmVhZHkiXSwibWFwcGluZ3MiOiI7O0FBQUEsU0FBU0EsZ0NBQVQsR0FBNEM7QUFDM0MsTUFBSUMsT0FBTyxHQUFHLEVBQWQ7O0FBQ0EsTUFDQyxnQkFBZ0IsT0FBT0MsMkJBQXZCLElBQ0EsZ0JBQWdCLE9BQU9BLDJCQUEyQixDQUFDQyxjQUZwRCxFQUdFO0FBQ0QsUUFDQyxhQUFhRCwyQkFBMkIsQ0FBQ0MsY0FBekMsSUFDQSxlQUFlLE9BQU9DLElBRnZCLEVBR0U7QUFDREgsTUFBQUEsT0FBTyxHQUFHLE1BQVY7QUFDQSxLQUxELE1BS08sSUFDTixrQkFBa0JDLDJCQUEyQixDQUFDQyxjQUE5QyxJQUNBLGVBQWUsT0FBT0UsRUFGaEIsRUFHTDtBQUNESixNQUFBQSxPQUFPLEdBQUcsSUFBVjtBQUNBO0FBQ0Q7O0FBQ0QsU0FBT0EsT0FBUDtBQUNBO0FBRUQ7QUFDQTtBQUNBO0FBQ0E7OztBQUNBLElBQUksT0FBT0ssRUFBUCxLQUFjLFdBQWxCLEVBQStCO0FBQzlCQSxFQUFBQSxFQUFFLENBQUNDLEtBQUgsQ0FBU0MsU0FBVCxDQUNDLG1DQURELEVBRUMsOEJBRkQsRUFHQ0Msd0JBSEQsRUFJQyxFQUpEO0FBTUFILEVBQUFBLEVBQUUsQ0FBQ0MsS0FBSCxDQUFTQyxTQUFULENBQ0MsNkNBREQsRUFFQyw4QkFGRCxFQUdDRSxrQ0FIRCxFQUlDLEVBSkQ7QUFNQTtBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQSxTQUFTRCx3QkFBVCxDQUNDRSxJQURELEVBRUNDLFFBRkQs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LE1BQUQsQ0FBRCxDQUFVSixJQUFWLENBQWUsV0FBZixLQUErQixRQUE5QztBQUNBLFVBQU1oRSxLQUFLLEdBQ1Z1QixDQUFDLENBQUM2QyxNQUFELENBQUQsQ0FBVUosSUFBVixDQUFlLFVBQWYsS0FDQXpDLENBQUMsQ0FBQzZDLE1BQUQsQ0FBRCxDQUFVRSxJQUFWLEVBREEsSUFFQUYsTUFBTSxDQUFDbkUsS0FGUCxJQUdBbUUsTUFBTSxDQUFDRyxJQUpSO0FBS0E1RSxNQUFBQSx3QkFBd0IsQ0FBQyxPQUFELEVBQVVHLFFBQVYsRUFBb0JDLE1BQXBCLEVBQTRCQyxLQUE1QixDQUF4QjtBQUNBLEtBWkQ7QUFhQTtBQUNEOztBQUVEdUIsQ0FBQyxDQUFDVSxRQUFELENBQUQsQ0FBWXVDLEtBQVosQ0FBa0IsWUFBWTtBQUM3QjlELEVBQUFBLHdCQUF3QjtBQUN4QixDQUZEIiwiZmlsZSI6IndwLWFuYWx5dGljcy10cmFja2luZy1nZW5lcmF0b3ItZnJvbnQtZW5kLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gd3BBbmFseXRpY3NDaGVja0FuYWx5dGljc1ZlcnNpb24oKSB7XG5cdGxldCB2ZXJzaW9uID0gJyc7XG5cdGlmIChcblx0XHQndW5kZWZpbmVkJyAhPT0gdHlwZW9mIGFuYWx5dGljc190cmFja2luZ19zZXR0aW5ncyAmJlxuXHRcdCd1bmRlZmluZWQnICE9PSB0eXBlb2YgYW5hbHl0aWNzX3RyYWNraW5nX3NldHRpbmdzLmFuYWx5dGljc190eXBlXG5cdCkge1xuXHRcdGlmIChcblx0XHRcdCdndGFnanMnID09PSBhbmFseXRpY3NfdHJhY2tpbmdfc2V0dGluZ3MuYW5hbHl0aWNzX3R5cGUgJiZcblx0XHRcdCdmdW5jdGlvbicgPT09IHR5cGVvZiBndGFnXG5cdFx0KSB7XG5cdFx0XHR2ZXJzaW9uID0gJ2d0YWcnO1xuXHRcdH0gZWxzZSBpZiAoXG5cdFx0XHQnYW5hbHl0aWNzanMnID09PSBhbmFseXRpY3NfdHJhY2tpbmdfc2V0dGluZ3MuYW5hbHl0aWNzX3R5cGUgJiZcblx0XHRcdCdmdW5jdGlvbicgPT09IHR5cGVvZiBnYVxuXHRcdCkge1xuXHRcdFx0dmVyc2lvbiA9ICdnYSc7XG5cdFx0fVxuXHR9XG5cdHJldHVybiB2ZXJzaW9uO1xufVxuXG4vKlxuICogY2FsbCBob29rcyBmcm9tIG90aGVyIHBsdWdpbnMgb3IgdGhlbWVzXG4gKlxuICovXG5pZiAodHlwZW9mIHdwICE9PSAndW5kZWZpbmVkJykge1xuXHR3cC5ob29rcy5hZGRBY3Rpb24oXG5cdFx0J3dwQW5hbHl0aWNzVHJhY2tpbmdHZW5lcmF0b3JFdmVudCcsXG5cdFx0J3dwQW5hbHl0aWNzVHJhY2tpbmdHZW5lcmF0b3InLFxuXHRcdHdwQW5hbHl0aWNzVHJhY2tpbmdFdmVudCxcblx0XHQxMFxuXHQpO1xuXHR3cC5ob29rcy5hZGRBY3Rpb24oXG5cdFx0J3dwQW5hbHl0aWNzVHJhY2tpbmdHZW5lcmF0b3JFY29tbWVyY2VBY3Rpb24nLFxuXHRcdCd3cEFuYWx5dGljc1RyYWNraW5nR2VuZXJhdG9yJyxcblx0XHR3cEFuYWx5dGljc1RyYWNraW5nRWNvbW1lcmNlQWN0aW9uLFxuXHRcdDEwXG5cdCk7XG59XG5cbi8qXG4gKiBDcmVhdGUgYSBHb29nbGUgQW5hbHl0aWNzIGV2ZW50XG4gKiBjYXRlZ29yeTogRXZlbnQgQ2F0ZWdvcnlcbiAqIGxhYmVsOiBFdmVudCBMYWJlbFxuICogYWN0aW9uOiBFdmVudCBBY3Rpb25cbiAqIHZhbHVlOiBvcHRpb25hbFxuICovXG5mdW5jdGlvbiB3cEFuYWx5dGljc1RyYWNraW5nRXZlbnQoXG5cdHR5cGUsXG5cdGNhdGVnb3J5LFxuXHRhY3Rpb24sXG5cdGxhYmVsLFxuXHR2YWx1ZSxcblx0bm9uX2ludGVyYWN0aW9uXG4pIHtcblx0Y29uc3QgdmVyc2lvbiA9IHdwQW5hbHl0aWNzQ2hlY2tBbmFseXRpY3NWZXJzaW9uKCk7XG5cdGlmICgnZ3RhZycgPT09IHZlcnNpb24pIHtcblx0XHQvLyBTZW5kcyB0aGUgZXZlbnQgdG8gdGhlIEdvb2dsZSBBbmFseXRpY3MgcHJvcGVydHkgd2l0aFxuXHRcdC8vIHRyYWNraW5nIElEIEdBX01FQVNVUkVNRU5UX0lEIHNldCBieSB0aGUgY29uZmlnIGNvbW1hbmQgaW5cblx0XHQvLyB0aGUgZ2xvYmFsIHRyYWNraW5nIHNuaXBwZXQuXG5cdFx0Ly8gZXhhbXBsZTogZ3RhZygnZXZlbnQnLCAncGxheScsIHsgJ2V2ZW50X2NhdGVnb3J5JzogJ1ZpZGVvcycsICdldmVudF9sYWJlbCc6ICdGYWxsIENhbXBhaWduJyB9KTtcblx0XHRjb25zdCBwYXJhbXMgPSB7XG5cdFx0XHRldmVudF9jYXRlZ29yeTogY2F0ZWdvcnksXG5cdFx0XHRldmVudF9sYWJlbDogbGFiZWwsXG5cdFx0fTtcblx0XHRpZiAoJ3VuZGVmaW5lZCcgIT09IHR5cGVvZiB2YWx1ZSkge1xuXHRcdFx0cGFyYW1zLnZhbHVlID0gdmFsdWU7XG5cdFx0fVxuXHRcdGlmICgndW5kZWZpbmVkJyAhPT0gdHlwZW9mIG5vbl9pbnRlcmFjdGlvbikge1xuXHRcdFx0cGFyYW1zLm5vbl9pbnRlcmFjdGlvbiA9IG5vbl9pbnRlcmFjdGlvbjtcblx0XHR9XG5cdFx0Z3RhZyh0eXBlLCBhY3Rpb24sIHBhcmFtcyk7XG5cdH0gZWxzZSBpZiAoJ2dhJyA9PT0gdmVyc2lvbikge1xuXHRcdC8vIFVzZXMgdGhlIGRlZmF1bHQgdHJhY2tlciB0byBzZW5kIHRoZSBldmVudCB0byB0aGVcblx0XHQvLyBHb29nbGUgQW5hbHl0aWNzIHByb3BlcnR5IHdpdGggdHJhY2tpbmcgSUQgR0FfTUVBU1VSRU1FTlRfSUQuXG5cdFx0Ly8gZXhhbXBsZTogZ2EoJ3NlbmQnLCAnZXZlbnQnLCAnVmlkZW9zJywgJ3BsYXknLCAnRmFsbCBDYW1wYWlnbicpO1xuXHRcdC8vIG5vbmludGVyYWN0aW9uIHNlZW1zIHRvIGhhdmUgYmVlbiB3b3JraW5nIGxpa2UgdGhpcyBpbiBhbmFseXRpY3MuanMuXG5cdFx0aWYgKG5vbl9pbnRlcmFjdGlvbiA9PSAxKSB7XG5cdFx0XHR2YWx1ZSA9IHsgbm9uSW50ZXJhY3Rpb246IDEgfTtcblx0XHR9XG5cdFx0aWYgKCd1bmRlZmluZWQnID09PSB0eXBlb2YgdmFsdWUpIHtcblx0XHRcdGdhKCdzZW5kJywgdHlwZSwgY2F0ZWdvcnksIGFjdGlvbiwgbGFiZWwpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRnYSgnc2VuZCcsIHR5cGUsIGNhdGVnb3J5LCBhY3Rpb24sIGxhYmVsLCB2YWx1ZSk7XG5cdFx0fVxuXHR9XG59XG5cbi8qXG4gKiBDcmVhdGUgYSBHb29nbGUgQW5hbHl0aWNzIEVjb21tZXJjZSBhY3Rpb25cbiAqXG4gKi9cbmZ1bmN0aW9uIHdwQW5hbHl0aWNzVHJhY2tpbmdFY29tbWVyY2VBY3Rpb24odHlwZSwgYWN0aW9uLCBwcm9kdWN0LCBzdGVwKSB7XG5cdGNvbnN0IHZlcnNpb24gPSB3cEFuYWx5dGljc0NoZWNrQW5hbHl0aWNzVmVyc2lvbigpO1xuXHRpZiAoJ2d0YWcnID09PSB2ZXJzaW9uKSB7XG5cdFx0Z3RhZyh0eXBlLCBhY3Rpb24sIHtcblx0XHRcdGl0ZW1zOiBbcHJvZHVjdF0sXG5cdFx0fSk7XG5cdH0gZWxzZSBpZiAoJ2dhJyA9PT0gdmVyc2lvbikge1xuXHRcdGdhKCdyZXF1aXJlJywgJ2VjJyk7XG5cdFx0Z2EoJ2VjOmFkZFByb2R1Y3QnLCBwcm9kdWN0KTtcblx0XHRzd2l0Y2ggKGFjdGlvbikge1xuXHRcdFx0Y2FzZSAnc2VsZWN0X2NvbnRlbnQnOlxuXHRcdFx0XHRnYSgnZWM6c2V0QWN0aW9uJywgJ2RldGFpbCcpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ2FkZF90b19jYXJ0Jzpcblx0XHRcdFx0Z2EoJ2VjOnNldEFjdGlvbicsICdhZGQnKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdiZWdpbl9jaGVja291dCc6XG5cdFx0XHRcdGdhKCdlYzpzZXRBY3Rpb24nLCAnY2hlY2tvdXQnLCB7XG5cdFx0XHRcdFx0c3RlcCxcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDpcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gd3BBbmFseXRpY3NUcmFja2luZ1NldHVwKCkge1xuXHRjb25zdCB2ZXJzaW9uID0gd3BBbmFseXRpY3NDaGVja0FuYWx5dGljc1ZlcnNpb24oKTtcblx0aWYgKCcnID09PSB2ZXJzaW9uKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Ly8gc2V0dGluZ3MgZm9yIFNjcm9sbERlcHRoIHBsdWdpblxuXHRpZiAoXG5cdFx0J3VuZGVmaW5lZCcgIT09IHR5cGVvZiBhbmFseXRpY3Nfc2Nyb2xsZGVwdGhfc2V0dGluZ3Muc2Nyb2xsICYmXG5cdFx0dHJ1ZSA9PT0gYW5hbHl0aWNzX3Njcm9sbGRlcHRoX3NldHRpbmdzLnNjcm9sbC5lbmFibGVkXG5cdCkge1xuXHRcdGNvbnN0IHNjcm9sbERlcHRoU2V0dGluZ3MgPSBbXTtcblx0XHQvLyB0aGlzIG5lZWRzIHRvIGJlIHRydWUsIHJlZ2FyZGxlc3MsIGJlY2F1c2Ugb3RoZXJ3aXNlIHRoZSBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlIHRyYWNraW5nIGlzIGRlZmluZWQgaW4gR29vZ2xlIFRhZyBNYW5hZ2VyLlxuXHRcdC8vIHRvZG86IGl0IG1pZ2h0IGJlIHdvcnRoIGJ1aWxkaW5nIGEgc2V0dGluZyBmb3IgdGhpcy5cblx0XHRzY3JvbGxEZXB0aFNldHRpbmdzLmd0bU92ZXJyaWRlID0gdHJ1ZTtcblxuXHRcdC8vIGlmIHdlJ3JlIHVzaW5nIGdhLCB3ZSBuZWVkIHRvIHRlbGwgdGhlIHBsdWdpblxuXHRcdGlmICgnZ3RhZycgIT09IHZlcnNpb24pIHtcblx0XHRcdHNjcm9sbERlcHRoU2V0dGluZ3MuZ2FHbG9iYWwgPSAnZ2EnO1xuXHRcdH1cblxuXHRcdC8vIHZhbHVlIGlzIGEgc3RyaW5nXG5cdFx0aWYgKFxuXHRcdFx0J3VuZGVmaW5lZCcgIT09XG5cdFx0XHRcdHR5cGVvZiBhbmFseXRpY3Nfc2Nyb2xsZGVwdGhfc2V0dGluZ3Muc2Nyb2xsLm1pbmltdW1faGVpZ2h0ICYmXG5cdFx0XHQnMCcgIT09IGFuYWx5dGljc19zY3JvbGxkZXB0aF9zZXR0aW5ncy5zY3JvbGwubWluaW11bV9oZWlnaHRcblx0XHQpIHtcblx0XHRcdHNjcm9sbERlcHRoU2V0dGluZ3MubWluaW11bV9oZWlnaHQgPVxuXHRcdFx0XHRhbmFseXRpY3Nfc2Nyb2xsZGVwdGhfc2V0dGluZ3Muc2Nyb2xsLm1pbmltdW1faGVpZ2h0O1xuXHRcdH1cblxuXHRcdC8vIHZhbHVlIGlzIGEgYm9vbGVhbi4gZGVmYXVsdCBpcyB0cnVlLlxuXHRcdGlmIChcblx0XHRcdCd1bmRlZmluZWQnICE9PVxuXHRcdFx0XHR0eXBlb2YgYW5hbHl0aWNzX3Njcm9sbGRlcHRoX3NldHRpbmdzLnNjcm9sbC5wZXJjZW50YWdlICYmXG5cdFx0XHQndHJ1ZScgIT09IGFuYWx5dGljc19zY3JvbGxkZXB0aF9zZXR0aW5ncy5zY3JvbGwucGVyY2VudGFnZVxuXHRcdCkge1xuXHRcdFx0c2Nyb2xsRGVwdGhTZXR0aW5ncy5wZXJjZW50YWdlID0gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Ly8gdmFsdWUgaXMgYSBib29sZWFuLiBkZWZhdWx0IGlzIHRydWUuXG5cdFx0aWYgKFxuXHRcdFx0J3VuZGVmaW5lZCcgIT09XG5cdFx0XHRcdHR5cGVvZiBhbmFseXRpY3Nfc2Nyb2xsZGVwdGhfc2V0dGluZ3Muc2Nyb2xsLnVzZXJfdGltaW5nICYmXG5cdFx0XHQndHJ1ZScgIT09IGFuYWx5dGljc19zY3JvbGxkZXB0aF9zZXR0aW5ncy5zY3JvbGwudXNlcl90aW1pbmdcblx0XHQpIHtcblx0XHRcdHNjcm9sbERlcHRoU2V0dGluZ3MudXNlcl90aW1pbmcgPSBmYWxzZTtcblx0XHR9XG5cblx0XHQvLyB2YWx1ZSBpcyBhIGJvb2xlYW4uIGRlZmF1bHQgaXMgdHJ1ZS5cblx0XHRpZiAoXG5cdFx0XHQndW5kZWZpbmVkJyAhPT1cblx0XHRcdFx0dHlwZW9mIGFuYWx5dGljc19zY3JvbGxkZXB0aF9zZXR0aW5ncy5zY3JvbGwucGl4ZWxfZGVwdGggJiZcblx0XHRcdCd0cnVlJyAhPT0gYW5hbHl0aWNzX3Njcm9sbGRlcHRoX3NldHRpbmdzLnNjcm9sbC51c2VyX3RpbWluZ1xuXHRcdCkge1xuXHRcdFx0c2Nyb2xsRGVwdGhTZXR0aW5ncy5waXhlbF9kZXB0aCA9IGZhbHNlO1xuXHRcdH1cblxuXHRcdC8vIHZhbHVlIGlzIGEgYm9vbGVhbi4gZGVmYXVsdCBpcyB0cnVlLlxuXHRcdGlmIChcblx0XHRcdCd1bmRlZmluZWQnICE9PVxuXHRcdFx0XHR0eXBlb2YgYW5hbHl0aWNzX3Njcm9sbGRlcHRoX3NldHRpbmdzLnNjcm9sbC5ub25faW50ZXJhY3Rpb24gJiZcblx0XHRcdCd0cnVlJyAhPT0gYW5hbHl0aWNzX3Njcm9sbGRlcHRoX3NldHRpbmdzLnNjcm9sbC5ub25faW50ZXJhY3Rpb25cblx0XHQpIHtcblx0XHRcdHNjcm9sbERlcHRoU2V0dGluZ3Mubm9uX2ludGVyYWN0aW9uID0gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Ly8gdmFsdWUgaXMgYW4gYXJyYXkuIGRlZmF1bHQgaXMgZW1wdHkuXG5cdFx0aWYgKFxuXHRcdFx0J3VuZGVmaW5lZCcgIT09XG5cdFx0XHR0eXBlb2YgYW5hbHl0aWNzX3Njcm9sbGRlcHRoX3NldHRpbmdzLnNjcm9sbC5zY3JvbGxfZWxlbWVudHNcblx0XHQpIHtcblx0XHRcdHNjcm9sbERlcHRoU2V0dGluZ3MuZWxlbWVudHMgPSAkLm1hcChcblx0XHRcdFx0YW5hbHl0aWNzX3Njcm9sbGRlcHRoX3NldHRpbmdzLnNjcm9sbC5zY3JvbGxfZWxlbWVudHMuc3BsaXQoXG5cdFx0XHRcdFx0JywnXG5cdFx0XHRcdCksXG5cdFx0XHRcdCQudHJpbVxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHQvLyBzZW5kIHNjcm9sbCBzZXR0aW5ncyB0byB0aGUgc2Nyb2xsZGVwdGggcGx1Z2luXG5cdFx0aWYgKFxuXHRcdFx0J3VuZGVmaW5lZCcgIT09XG5cdFx0XHRcdHR5cGVvZiBhbmFseXRpY3Nfc2Nyb2xsZGVwdGhfc2V0dGluZ3Muc2Nyb2xsLnVzZV9qcXVlcnkgJiZcblx0XHRcdHRydWUgPT09IGFuYWx5dGljc19zY3JvbGxkZXB0aF9zZXR0aW5ncy5zY3JvbGwudXNlX2pxdWVyeVxuXHRcdCkge1xuXHRcdFx0alF1ZXJ5LnNjcm9sbERlcHRoKHNjcm9sbERlcHRoU2V0dGluZ3MpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRnYXNjcm9sbGRlcHRoLmluaXQoc2Nyb2xsRGVwdGhTZXR0aW5ncyk7XG5cdFx0fVxuXHR9XG5cblx0aWYgKFxuXHRcdCd1bmRlZmluZWQnICE9PSB0eXBlb2YgYW5hbHl0aWNzX3RyYWNraW5nX3NldHRpbmdzLnNwZWNpYWwgJiZcblx0XHR0cnVlID09PSBhbmFseXRpY3NfdHJhY2tpbmdfc2V0dGluZ3Muc3BlY2lhbC5lbmFibGVkXG5cdCkge1xuXHRcdC8vIGV4dGVybmFsIGxpbmtzXG5cdFx0JCgnYVtocmVmXj1cImh0dHBcIl06bm90KFtocmVmKj1cIjovLycgKyBkb2N1bWVudC5kb21haW4gKyAnXCJdKScpLmNsaWNrKFxuXHRcdFx0ZnVuY3Rpb24gKCkge1xuXHRcdFx0XHR3cEFuYWx5dGljc1RyYWNraW5nRXZlbnQoXG5cdFx0XHRcdFx0J2V2ZW50Jyxcblx0XHRcdFx0XHQnT3V0Ym91bmQgbGlua3MnLFxuXHRcdFx0XHRcdCdDbGljaycsXG5cdFx0XHRcdFx0dGhpcy5ocmVmXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0KTtcblxuXHRcdC8vIG1haWx0byBsaW5rc1xuXHRcdCQoJ2FbaHJlZl49XCJtYWlsdG9cIl0nKS5jbGljayhmdW5jdGlvbiAoKSB7XG5cdFx0XHR3cEFuYWx5dGljc1RyYWNraW5nRXZlbnQoXG5cdFx0XHRcdCdldmVudCcsXG5cdFx0XHRcdCdNYWlscycsXG5cdFx0XHRcdCdDbGljaycsXG5cdFx0XHRcdHRoaXMuaHJlZi5zdWJzdHJpbmcoNylcblx0XHRcdCk7XG5cdFx0fSk7XG5cblx0XHQvLyB0ZWwgbGlua3Ncblx0XHQkKCdhW2hyZWZePVwidGVsXCJdJykuY2xpY2soZnVuY3Rpb24gKCkge1xuXHRcdFx0d3BBbmFseXRpY3NUcmFja2luZ0V2ZW50KFxuXHRcdFx0XHQnZXZlbnQnLFxuXHRcdFx0XHQnVGVsZXBob25lJyxcblx0XHRcdFx0J0NhbGwnLFxuXHRcdFx0XHR0aGlzLmhyZWYuc3Vic3RyaW5nKDcpXG5cdFx0XHQpO1xuXHRcdH0pO1xuXG5cdFx0Ly8gaW50ZXJuYWwgbGlua3Ncblx0XHQkKFxuXHRcdFx0J2E6bm90KFtocmVmXj1cIihodHRwOnxodHRwczopPy8vXCJdLFtocmVmXj1cIiNcIl0sW2hyZWZePVwibWFpbHRvOlwiXSknXG5cdFx0KS5jbGljayhmdW5jdGlvbiAoKSB7XG5cdFx0XHQvLyB0cmFjayBkb3dubG9hZHNcblx0XHRcdGlmICgnJyAhPT0gYW5hbHl0aWNzX3RyYWNraW5nX3NldHRpbmdzLnNwZWNpYWwuZG93bmxvYWRfcmVnZXgpIHtcblx0XHRcdFx0Y29uc3QgdXJsID0gdGhpcy5ocmVmO1xuXHRcdFx0XHRjb25zdCBjaGVja0Rvd25sb2FkID0gbmV3IFJlZ0V4cChcblx0XHRcdFx0XHQnXFxcXC4oJyArXG5cdFx0XHRcdFx0XHRhbmFseXRpY3NfdHJhY2tpbmdfc2V0dGluZ3Muc3BlY2lhbC5kb3dubG9hZF9yZWdleCArXG5cdFx0XHRcdFx0XHQnKShbPyNdLiopPyQnLFxuXHRcdFx0XHRcdCdpJ1xuXHRcdFx0XHQpO1xuXHRcdFx0XHRjb25zdCBpc0Rvd25sb2FkID0gY2hlY2tEb3dubG9hZC50ZXN0KHVybCk7XG5cdFx0XHRcdGlmICh0cnVlID09PSBpc0Rvd25sb2FkKSB7XG5cdFx0XHRcdFx0Y29uc3QgY2hlY2tEb3dubG9hZEV4dGVuc2lvbiA9IG5ldyBSZWdFeHAoXG5cdFx0XHRcdFx0XHQnXFxcXC4oJyArXG5cdFx0XHRcdFx0XHRcdGFuYWx5dGljc190cmFja2luZ19zZXR0aW5ncy5zcGVjaWFsLmRvd25sb2FkX3JlZ2V4ICtcblx0XHRcdFx0XHRcdFx0JykoWz8jXS4qKT8kJyxcblx0XHRcdFx0XHRcdCdpJ1xuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0Y29uc3QgZXh0ZW5zaW9uUmVzdWx0ID0gY2hlY2tEb3dubG9hZEV4dGVuc2lvbi5leGVjKHVybCk7XG5cdFx0XHRcdFx0bGV0IGV4dGVuc2lvbiA9ICcnO1xuXHRcdFx0XHRcdGlmIChudWxsICE9PSBleHRlbnNpb25SZXN1bHQpIHtcblx0XHRcdFx0XHRcdGV4dGVuc2lvbiA9IGV4dGVuc2lvblJlc3VsdFsxXTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0ZXh0ZW5zaW9uID0gZXh0ZW5zaW9uUmVzdWx0O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQvLyB3ZSBjYW4ndCB1c2UgdGhlIHVybCBmb3IgdGhlIHZhbHVlIGhlcmUsIGV2ZW4gdGhvdWdoIHRoYXQgd291bGQgYmUgbmljZSwgYmVjYXVzZSB2YWx1ZSBpcyBzdXBwb3NlZCB0byBiZSBhbiBpbnRlZ2VyXG5cdFx0XHRcdFx0d3BBbmFseXRpY3NUcmFja2luZ0V2ZW50KFxuXHRcdFx0XHRcdFx0J2V2ZW50Jyxcblx0XHRcdFx0XHRcdCdEb3dubG9hZHMnLFxuXHRcdFx0XHRcdFx0ZXh0ZW5zaW9uLFxuXHRcdFx0XHRcdFx0dGhpcy5ocmVmXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0aWYgKFxuXHRcdCd1bmRlZmluZWQnICE9PSB0eXBlb2YgYW5hbHl0aWNzX3RyYWNraW5nX3NldHRpbmdzLmFmZmlsaWF0ZSAmJlxuXHRcdHRydWUgPT09IGFuYWx5dGljc190cmFja2luZ19zZXR0aW5ncy5hZmZpbGlhdGUuZW5hYmxlZFxuXHQpIHtcblx0XHQvLyBhbnkgbGluayBjb3VsZCBiZSBhbiBhZmZpbGlhdGUsIGkgZ3Vlc3M/XG5cdFx0JCgnYScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcblx0XHRcdC8vIHRyYWNrIGFmZmlsaWF0ZXNcblx0XHRcdGlmICgnJyAhPT0gYW5hbHl0aWNzX3RyYWNraW5nX3NldHRpbmdzLmFmZmlsaWF0ZS5hZmZpbGlhdGVfcmVnZXgpIHtcblx0XHRcdFx0Y29uc3QgY2hlY2tBZmZpbGlhdGUgPSBuZXcgUmVnRXhwKFxuXHRcdFx0XHRcdCdcXFxcLignICtcblx0XHRcdFx0XHRcdGFuYWx5dGljc190cmFja2luZ19zZXR0aW5ncy5hZmZpbGlhdGUuYWZmaWxpYXRlX3JlZ2V4ICtcblx0XHRcdFx0XHRcdCcpKFs/I10uKik/JCcsXG5cdFx0XHRcdFx0J2knXG5cdFx0XHRcdCk7XG5cdFx0XHRcdGNvbnN0IGlzQWZmaWxpYXRlID0gY2hlY2tBZmZpbGlhdGUudGVzdCh1cmwpO1xuXHRcdFx0XHRpZiAodHJ1ZSA9PT0gaXNBZmZpbGlhdGUpIHtcblx0XHRcdFx0XHR3cEFuYWx5dGljc1RyYWNraW5nRXZlbnQoXG5cdFx0XHRcdFx0XHQnZXZlbnQnLFxuXHRcdFx0XHRcdFx0J0FmZmlsaWF0ZScsXG5cdFx0XHRcdFx0XHQnQ2xpY2snLFxuXHRcdFx0XHRcdFx0dGhpcy5ocmVmXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0Ly8gbGluayBmcmFnbWVudHMgYXMgcGFnZXZpZXdzXG5cdC8vIGRvZXMgbm90IHVzZSB0aGUgZXZlbnQgdHJhY2tpbmcgbWV0aG9kOyBmbGFncyBhIHBhZ2V2aWV3IGluc3RlYWQuXG5cdGlmIChcblx0XHQndW5kZWZpbmVkJyAhPT0gdHlwZW9mIGFuYWx5dGljc190cmFja2luZ19zZXR0aW5ncy5mcmFnbWVudCAmJlxuXHRcdHRydWUgPT09IGFuYWx5dGljc190cmFja2luZ19zZXR0aW5ncy5mcmFnbWVudC5lbmFibGVkXG5cdCkge1xuXHRcdHdpbmRvdy5vbmhhc2hjaGFuZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcblx0XHRcdGNvbnN0IGZyYWdtZW50X3VybCA9XG5cdFx0XHRcdGxvY2F0aW9uLnBhdGhuYW1lICsgbG9jYXRpb24uc2VhcmNoICsgbG9jYXRpb24uaGFzaDtcblx0XHRcdGlmICgnZ3RhZycgPT09IHZlcnNpb24pIHtcblx0XHRcdFx0Z3RhZygnc2V0JywgJ3BhZ2VfcGF0aCcsIGZyYWdtZW50X3VybCk7XG5cdFx0XHRcdGd0YWcoJ2V2ZW50JywgJ3BhZ2VfdmlldycpO1xuXHRcdFx0fSBlbHNlIGlmICgnZ2EnID09PSB2ZXJzaW9uKSB7XG5cdFx0XHRcdGdhKCdzZW5kJywgJ3BhZ2V2aWV3JywgZnJhZ21lbnRfdXJsKTtcblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cblx0Ly8gd2hlbiBhIGJ1dHRvbiBpcyBjbGlja2VkLCBhdHRhY2ggaXQgdG8gdGhlIGZvcm0ncyBkYXRhXG5cdCQoJ2lucHV0W3R5cGU9XCJzdWJtaXRcIl0sIGJ1dHRvblt0eXBlPVwic3VibWl0XCJdJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXHRcdGNvbnN0IGZvcm0gPSAkKHRoaXMpLnBhcmVudHMoJ2Zvcm06Zmlyc3QnKTtcblx0XHQkKGZvcm0pLmRhdGEoJ2J1dHRvbicsIHRoaXMpO1xuXHR9KTtcblxuXHQvLyBiYXNpYyBmb3JtIHN1Ym1pdHMuIHRyYWNrIHN1Ym1pdCBpbnN0ZWFkIG9mIGNsaWNrIGJlY2F1c2Ugb3RoZXJ3aXNlIGl0J3Mgd2VpcmQuXG5cdGlmIChcblx0XHQndW5kZWZpbmVkJyAhPT0gdHlwZW9mIGFuYWx5dGljc190cmFja2luZ19zZXR0aW5ncy5mb3JtX3N1Ym1pc3Npb25zICYmXG5cdFx0dHJ1ZSA9PT0gYW5hbHl0aWNzX3RyYWNraW5nX3NldHRpbmdzLmZvcm1fc3VibWlzc2lvbnMuZW5hYmxlZFxuXHQpIHtcblx0XHQkKCdmb3JtJykuc3VibWl0KGZ1bmN0aW9uIChmKSB7XG5cdFx0XHRjb25zdCBidXR0b24gPVxuXHRcdFx0XHQkKHRoaXMpLmRhdGEoJ2J1dHRvbicpIHx8XG5cdFx0XHRcdCQoJ2lucHV0W3R5cGU9XCJzdWJtaXRcIl0sIGJ1dHRvblt0eXBlPVwic3VibWl0XCJdJykuZ2V0KDApO1xuXHRcdFx0Y29uc3QgY2F0ZWdvcnkgPSAkKGJ1dHRvbikuZGF0YSgnZ2EtY2F0ZWdvcnknKSB8fCAnRm9ybSc7XG5cdFx0XHRjb25zdCBhY3Rpb24gPSAkKGJ1dHRvbikuZGF0YSgnZ2EtYWN0aW9uJykgfHwgJ1N1Ym1pdCc7XG5cdFx0XHRjb25zdCBsYWJlbCA9XG5cdFx0XHRcdCQoYnV0dG9uKS5kYXRhKCdnYS1sYWJlbCcpIHx8XG5cdFx0XHRcdCQoYnV0dG9uKS50ZXh0KCkgfHxcblx0XHRcdFx0YnV0dG9uLnZhbHVlIHx8XG5cdFx0XHRcdGJ1dHRvbi5uYW1lO1xuXHRcdFx0d3BBbmFseXRpY3NUcmFja2luZ0V2ZW50KCdldmVudCcsIGNhdGVnb3J5LCBhY3Rpb24sIGxhYmVsKTtcblx0XHR9KTtcblx0fVxufVxuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG5cdHdwQW5hbHl0aWNzVHJhY2tpbmdTZXR1cCgpO1xufSk7XG4iXX0=
}(jQuery));
