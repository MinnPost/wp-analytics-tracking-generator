;(function($) {
"use strict";

function wpAnalyticsCheckAnalyticsVersion() {
  let version = '';
  if ('undefined' !== typeof analytics_tracking_settings && 'undefined' !== typeof analytics_tracking_settings.analytics_type) {
    if ('gtagjs' === analytics_tracking_settings.analytics_type && 'function' === typeof gtag) {
      version = 'gtag';
    } else if ('analyticsjs' === analytics_tracking_settings.analytics_type && 'function' === typeof ga) {
      version = 'ga';
    }
  }
  return version;
}

/*
 * call hooks from other plugins or themes
 *
 */
if (typeof wp !== 'undefined') {
  wp.hooks.addAction('wpAnalyticsTrackingGeneratorEvent', 'wpAnalyticsTrackingGenerator', wpAnalyticsTrackingEvent, 10);
  wp.hooks.addAction('wpAnalyticsTrackingGeneratorEcommerceAction', 'wpAnalyticsTrackingGenerator', wpAnalyticsTrackingEcommerceAction, 10);
}

/*
 * Create a Google Analytics event
 * category: Event Category
 * label: Event Label
 * action: Event Action
 * value: optional
 */
function wpAnalyticsTrackingEvent(type, category, action, label, value, non_interaction) {
  const version = wpAnalyticsCheckAnalyticsVersion();
  if ('gtag' === version) {
    // Sends the event to the Google Analytics property with
    // tracking ID GA_MEASUREMENT_ID set by the config command in
    // the global tracking snippet.
    // example: gtag('event', 'play', { 'event_category': 'Videos', 'event_label': 'Fall Campaign' });
    const params = {
      event_category: category,
      event_label: label
    };
    if ('undefined' !== typeof value) {
      params.value = value;
    }
    if ('undefined' !== typeof non_interaction) {
      params.non_interaction = non_interaction;
    }
    gtag(type, action, params);
  } else if ('ga' === version) {
    // Uses the default tracker to send the event to the
    // Google Analytics property with tracking ID GA_MEASUREMENT_ID.
    // example: ga('send', 'event', 'Videos', 'play', 'Fall Campaign');
    // noninteraction seems to have been working like this in analytics.js.
    if (non_interaction === 1) {
      value = {
        nonInteraction: 1
      };
    }
    if ('undefined' === typeof value) {
      ga('send', type, category, action, label);
    } else {
      ga('send', type, category, action, label, value);
    }
  }
}

/*
 * Create a Google Analytics Ecommerce action
 *
 */
function wpAnalyticsTrackingEcommerceAction(type, action, product, step) {
  const version = wpAnalyticsCheckAnalyticsVersion();
  if ('gtag' === version) {
    gtag(type, action, {
      items: [product]
    });
  } else if ('ga' === version) {
    ga('require', 'ec');
    ga('ec:addProduct', product);
    switch (action) {
      case 'select_content':
        ga('ec:setAction', 'detail');
        break;
      case 'add_to_cart':
        ga('ec:setAction', 'add');
        break;
      case 'begin_checkout':
        ga('ec:setAction', 'checkout', {
          step
        });
        break;
      default:
    }
  }
}
function wpAnalyticsTrackingSetup() {
  const version = wpAnalyticsCheckAnalyticsVersion();
  if ('' === version) {
    return;
  }

  // settings for ScrollDepth plugin
  if ('undefined' !== typeof analytics_scrolldepth_settings.scroll && true === analytics_scrolldepth_settings.scroll.enabled) {
    const scrollDepthSettings = [];
    // this needs to be true, regardless, because otherwise the assumption is that the tracking is defined in Google Tag Manager.
    // todo: it might be worth building a setting for this.
    scrollDepthSettings.gtmOverride = true;

    // if we're using ga, we need to tell the plugin
    if ('gtag' !== version) {
      scrollDepthSettings.gaGlobal = 'ga';
    } else {
      // in gtag, we set our own callback so we can deal with Google Analytics 4.
      scrollDepthSettings.eventHandler = function (data) {
        //console.log(data);

        /* previous default
        gtag('event', action, {
        	'event_category': 'Scroll Depth',
        	'event_label': label,
        	'value': 1,
        	'non_interaction': options.nonInteraction
        });*/

        /* parameters
        function wpAnalyticsTrackingEvent(
        	type,
        	category,
        	action,
        	label,
        	value,
        	non_interaction
        ) */

        wpAnalyticsTrackingEvent('event', data.eventCategory, data.eventAction, data.eventLabel, data.eventValue, data.eventNonInteraction);
      };
    }

    // value is a string
    if ('undefined' !== typeof analytics_scrolldepth_settings.scroll.minimum_height && '0' !== analytics_scrolldepth_settings.scroll.minimum_height) {
      scrollDepthSettings.minimum_height = analytics_scrolldepth_settings.scroll.minimum_height;
    }

    // value is a boolean. default is true.
    if ('undefined' !== typeof analytics_scrolldepth_settings.scroll.percentage && 'true' !== analytics_scrolldepth_settings.scroll.percentage) {
      scrollDepthSettings.percentage = false;
    }

    // value is a boolean. default is true.
    if ('undefined' !== typeof analytics_scrolldepth_settings.scroll.user_timing && 'true' !== analytics_scrolldepth_settings.scroll.user_timing) {
      scrollDepthSettings.user_timing = false;
    }

    // value is a boolean. default is true.
    if ('undefined' !== typeof analytics_scrolldepth_settings.scroll.pixel_depth && 'true' !== analytics_scrolldepth_settings.scroll.user_timing) {
      scrollDepthSettings.pixel_depth = false;
    }

    // value is a boolean. default is true.
    if ('undefined' !== typeof analytics_scrolldepth_settings.scroll.non_interaction && 'true' !== analytics_scrolldepth_settings.scroll.non_interaction) {
      scrollDepthSettings.non_interaction = false;
    }

    // value is an array. default is empty.
    if ('undefined' !== typeof analytics_scrolldepth_settings.scroll.scroll_elements) {
      scrollDepthSettings.elements = $.map(analytics_scrolldepth_settings.scroll.scroll_elements.split(','), $.trim);
    }

    // send scroll settings to the scrolldepth plugin
    if ('undefined' !== typeof analytics_scrolldepth_settings.scroll.use_jquery && true === analytics_scrolldepth_settings.scroll.use_jquery) {
      jQuery.scrollDepth(scrollDepthSettings);
    } else {
      gascrolldepth.init(scrollDepthSettings);
    }
  }
  if ('undefined' !== typeof analytics_tracking_settings.special && true === analytics_tracking_settings.special.enabled) {
    // external links
    $('a[href^="http"]:not([href*="://' + document.domain + '"])').click(function () {
      wpAnalyticsTrackingEvent('event', 'Outbound links', 'Click', this.href);
    });

    // mailto links
    $('a[href^="mailto"]').click(function () {
      wpAnalyticsTrackingEvent('event', 'Mails', 'Click', this.href.substring(7));
    });

    // tel links
    $('a[href^="tel"]').click(function () {
      wpAnalyticsTrackingEvent('event', 'Telephone', 'Call', this.href.substring(7));
    });

    // internal links
    $('a:not([href^="(http:|https:)?//"],[href^="#"],[href^="mailto:"])').click(function () {
      // track downloads
      if ('' !== analytics_tracking_settings.special.download_regex) {
        const url = this.href;
        const checkDownload = new RegExp('\\.(' + analytics_tracking_settings.special.download_regex + ')([?#].*)?$', 'i');
        const isDownload = checkDownload.test(url);
        if (true === isDownload) {
          const checkDownloadExtension = new RegExp('\\.(' + analytics_tracking_settings.special.download_regex + ')([?#].*)?$', 'i');
          const extensionResult = checkDownloadExtension.exec(url);
          let extension = '';
          if (null !== extensionResult) {
            extension = extensionResult[1];
          } else {
            extension = extensionResult;
          }
          // we can't use the url for the value here, even though that would be nice, because value is supposed to be an integer
          wpAnalyticsTrackingEvent('event', 'Downloads', extension, this.href);
        }
      }
    });
  }
  if ('undefined' !== typeof analytics_tracking_settings.affiliate && true === analytics_tracking_settings.affiliate.enabled) {
    // any link could be an affiliate, i guess?
    $('a').click(function () {
      const url = this.href;
      // track affiliates
      if ('' !== analytics_tracking_settings.affiliate.affiliate_regex) {
        const checkAffiliate = new RegExp('\\.(' + analytics_tracking_settings.affiliate.affiliate_regex + ')([?#].*)?$', 'i');
        const isAffiliate = checkAffiliate.test(url);
        if (true === isAffiliate) {
          wpAnalyticsTrackingEvent('event', 'Affiliate', 'Click', this.href);
        }
      }
    });
  }

  // link fragments as pageviews
  // does not use the event tracking method; flags a pageview instead.
  if ('undefined' !== typeof analytics_tracking_settings.fragment && true === analytics_tracking_settings.fragment.enabled) {
    window.onhashchange = function () {
      const fragmentUrl = location.pathname + location.search + location.hash;
      if ('gtag' === version) {
        gtag('set', 'page_path', fragmentUrl);
        gtag('event', 'page_view');
      } else if ('ga' === version) {
        ga('send', 'pageview', fragmentUrl);
      }
    };
  }

  // when a button is clicked, attach it to the form's data
  $('input[type="submit"], button[type="submit"]').on('click', function () {
    const form = $(this).parents('form:first');
    $(form).data('button', this);
  });

  // basic form submits. track submit instead of click because otherwise it's weird.
  if ('undefined' !== typeof analytics_tracking_settings.form_submissions && true === analytics_tracking_settings.form_submissions.enabled) {
    $('form').submit(function () {
      const button = $(this).data('button') || $('input[type="submit"], button[type="submit"]').get(0);
      const category = $(button).data('ga-category') || 'Form';
      const action = $(button).data('ga-action') || 'Submit';
      const label = $(button).data('ga-label') || $(button).text() || button.value || button.name;
      wpAnalyticsTrackingEvent('event', category, action, label);
    });
  }
}
$(document).ready(function () {
  wpAnalyticsTrackingSetup();
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndwLWV2ZW50LXRyYWNraW5nLmpzIl0sIm5hbWVzIjpbIndwQW5hbHl0aWNzQ2hlY2tBbmFseXRpY3NWZXJzaW9uIiwidmVyc2lvbiIsImFuYWx5dGljc190cmFja2luZ19zZXR0aW5ncyIsImFuYWx5dGljc190eXBlIiwiZ3RhZyIsImdhIiwid3AiLCJob29rcyIsImFkZEFjdGlvbiIsIndwQW5hbHl0aWNzVHJhY2tpbmdFdmVudCIsIndwQW5hbHl0aWNzVHJhY2tpbmdFY29tbWVyY2VBY3Rpb24iLCJ0eXBlIiwiY2F0ZWdvcnkiLCJhY3Rpb24iLCJsYWJlbCIsInZhbHVlIiwibm9uX2ludGVyYWN0aW9uIiwicGFyYW1zIiwiZXZlbnRfY2F0ZWdvcnkiLCJldmVudF9sYWJlbCIsIm5vbkludGVyYWN0aW9uIiwicHJvZHVjdCIsInN0ZXAiLCJpdGVtcyIsIndwQW5hbHl0aWNzVHJhY2tpbmdTZXR1cCIsImFuYWx5dGljc19zY3JvbGxkZXB0aF9zZXR0aW5ncyIsInNjcm9sbCIsImVuYWJsZWQiLCJzY3JvbGxEZXB0aFNldHRpbmdzIiwiZ3RtT3ZlcnJpZGUiLCJnYUdsb2JhbCIsImV2ZW50SGFuZGxlciIsImRhdGEiLCJldmVudENhdGVnb3J5IiwiZXZlbnRBY3Rpb24iLCJldmVudExhYmVsIiwiZXZlbnRWYWx1ZSIsImV2ZW50Tm9uSW50ZXJhY3Rpb24iLCJtaW5pbXVtX2hlaWdodCIsInBlcmNlbnRhZ2UiLCJ1c2VyX3RpbWluZyIsInBpeGVsX2RlcHRoIiwic2Nyb2xsX2VsZW1lbnRzIiwiZWxlbWVudHMiLCIkIiwibWFwIiwic3BsaXQiLCJ0cmltIiwidXNlX2pxdWVyeSIsImpRdWVyeSIsInNjcm9sbERlcHRoIiwiZ2FzY3JvbGxkZXB0aCIsImluaXQiLCJzcGVjaWFsIiwiZG9jdW1lbnQiLCJkb21haW4iLCJjbGljayIsImhyZWYiLCJzdWJzdHJpbmciLCJkb3dubG9hZF9yZWdleCIsInVybCIsImNoZWNrRG93bmxvYWQiLCJSZWdFeHAiLCJpc0Rvd25sb2FkIiwidGVzdCIsImNoZWNrRG93bmxvYWRFeHRlbnNpb24iLCJleHRlbnNpb25SZXN1bHQiLCJleGVjIiwiZXh0ZW5zaW9uIiwiYWZmaWxpYXRlIiwiYWZmaWxpYXRlX3JlZ2V4IiwiY2hlY2tBZmZpbGlhdGUiLCJpc0FmZmlsaWF0ZSIsImZyYWdtZW50Iiwid2luZG93Iiwib25oYXNoY2hhbmdlIiwiZnJhZ21lbnRVcmwiLCJsb2NhdGlvbiIsInBhdGhuYW1lIiwic2VhcmNoIiwiaGFzaCIsIm9uIiwiZm9ybSIsInBhcmVudHMiLCJmb3JtX3N1Ym1pc3Npb25zIiwic3VibWl0IiwiYnV0dG9uIiwiZ2V0IiwidGV4dCIsIm5hbWUiLCJyZWFkeSJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxTQUFTQSxnQ0FBZ0MsR0FBRztFQUMzQyxJQUFJQyxPQUFPLEdBQUcsRUFBRTtFQUNoQixJQUNDLFdBQVcsS0FBSyxPQUFPQywyQkFBMkIsSUFDbEQsV0FBVyxLQUFLLE9BQU9BLDJCQUEyQixDQUFDQyxjQUFjLEVBQ2hFO0lBQ0QsSUFDQyxRQUFRLEtBQUtELDJCQUEyQixDQUFDQyxjQUFjLElBQ3ZELFVBQVUsS0FBSyxPQUFPQyxJQUFJLEVBQ3pCO01BQ0RILE9BQU8sR0FBRyxNQUFNO0lBQ2pCLENBQUMsTUFBTSxJQUNOLGFBQWEsS0FBS0MsMkJBQTJCLENBQUNDLGNBQWMsSUFDNUQsVUFBVSxLQUFLLE9BQU9FLEVBQUUsRUFDdkI7TUFDREosT0FBTyxHQUFHLElBQUk7SUFDZjtFQUNEO0VBQ0EsT0FBT0EsT0FBTztBQUNmOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxPQUFPSyxFQUFFLEtBQUssV0FBVyxFQUFFO0VBQzlCQSxFQUFFLENBQUNDLEtBQUssQ0FBQ0MsU0FBUyxDQUNqQixtQ0FBbUMsRUFDbkMsOEJBQThCLEVBQzlCQyx3QkFBd0IsRUFDeEIsRUFBRSxDQUNGO0VBQ0RILEVBQUUsQ0FBQ0MsS0FBSyxDQUFDQyxTQUFTLENBQ2pCLDZDQUE2QyxFQUM3Qyw4QkFBOEIsRUFDOUJFLGtDQUFrQyxFQUNsQyxFQUFFLENBQ0Y7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVNELHdCQUF3QixDQUNoQ0UsSUFBSSxFQUNKQyxRQUFRLEVBQ1JDLE1BQU0sRUFDTkMsS0FBSyxFQUNMQyxLQUFLLEVBQ0xDLGVBQWUsRUFDZDtFQUNELE1BQU1mLE9BQU8sR0FBR0QsZ0NBQWdDLEVBQUU7RUFDbEQsSUFBSSxNQUFNLEtBQUtDLE9BQU8sRUFBRTtJQUN2QjtJQUNBO0lBQ0E7SUFDQTtJQUNBLE1BQU1nQixNQUFNLEdBQUc7TUFDZEMsY0FBYyxFQUFFTixRQUFRO01BQ3hCTyxXQUFXLEVBQUVMO0lBQ2QsQ0FBQztJQUNELElBQUksV0FBVyxLQUFLLE9BQU9DLEtBQUssRUFBRTtNQUNqQ0UsTUFBTSxDQUFDRixLQUFLLEdBQUdBLEtBQUs7SUFDckI7SUFDQSxJQUFJLFdBQVcsS0FBSyxPQUFPQyxlQUFlLEVBQUU7TUFDM0NDLE1BQU0sQ0FBQ0QsZUFBZSxHQUFHQSxlQUFlO0lBQ3pDO0lBQ0FaLElBQUksQ0FBQ08sSUFBSSxFQUFFRSxNQUFNLEVBQUVJLE1BQU0sQ0FBQztFQUMzQixDQUFDLE1BQU0sSUFBSSxJQUFJLEtBQUtoQixPQUFPLEVBQUU7SUFDNUI7SUFDQTtJQUNBO0lBQ0E7SUFDQSxJQUFJZSxlQUFlLEtBQUssQ0FBQyxFQUFFO01BQzFCRCxLQUFLLEdBQUc7UUFBRUssY0FBYyxFQUFFO01BQUUsQ0FBQztJQUM5QjtJQUNBLElBQUksV0FBVyxLQUFLLE9BQU9MLEtBQUssRUFBRTtNQUNqQ1YsRUFBRSxDQUFDLE1BQU0sRUFBRU0sSUFBSSxFQUFFQyxRQUFRLEVBQUVDLE1BQU0sRUFBRUMsS0FBSyxDQUFDO0lBQzFDLENBQUMsTUFBTTtNQUNOVCxFQUFFLENBQUMsTUFBTSxFQUFFTSxJQUFJLEVBQUVDLFFBQVEsRUFBRUMsTUFBTSxFQUFFQyxLQUFLLEVBQUVDLEtBQUssQ0FBQztJQUNqRDtFQUNEO0FBQ0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTTCxrQ0FBa0MsQ0FBQ0MsSUFBSSxFQUFFRSxNQUFNLEVBQUVRLE9BQU8sRUFBRUMsSUFBSSxFQUFFO0VBQ3hFLE1BQU1yQixPQUFPLEdBQUdELGdDQUFnQyxFQUFFO0VBQ2xELElBQUksTUFBTSxLQUFLQyxPQUFPLEVBQUU7SUFDdkJHLElBQUksQ0FBQ08sSUFBSSxFQUFFRSxNQUFNLEVBQUU7TUFDbEJVLEtBQUssRUFBRSxDQUFDRixPQUFPO0lBQ2hCLENBQUMsQ0FBQztFQUNILENBQUMsTUFBTSxJQUFJLElBQUksS0FBS3BCLE9BQU8sRUFBRTtJQUM1QkksRUFBRSxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUM7SUFDbkJBLEVBQUUsQ0FBQyxlQUFlLEVBQUVnQixPQUFPLENBQUM7SUFDNUIsUUFBUVIsTUFBTTtNQUNiLEtBQUssZ0JBQWdCO1FBQ3BCUixFQUFFLENBQUMsY0FBYyxFQUFFLFFBQVEsQ0FBQztRQUM1QjtNQUNELEtBQUssYUFBYTtRQUNqQkEsRUFBRSxDQUFDLGNBQWMsRUFBRSxLQUFLLENBQUM7UUFDekI7TUFDRCxLQUFLLGdCQUFnQjtRQUNwQkEsRUFBRSxDQUFDLGNBQWMsRUFBRSxVQUFVLEVBQUU7VUFDOUJpQjtRQUNELENBQUMsQ0FBQztRQUNGO01BQ0Q7SUFBUTtFQUVWO0FBQ0Q7QUFFQSxTQUFTRSx3QkFBd0IsR0FBRztFQUNuQyxNQUFNdkIsT0FBTyxHQUFHRCxnQ0FBZ0MsRUFBRTtFQUNsRCxJQUFJLEVBQUUsS0FBS0MsT0FBTyxFQUFFO0lBQ25CO0VBQ0Q7O0VBRUE7RUFDQSxJQUNDLFdBQVcsS0FBSyxPQUFPd0IsOEJBQThCLENBQUNDLE1BQU0sSUFDNUQsSUFBSSxLQUFLRCw4QkFBOEIsQ0FBQ0MsTUFBTSxDQUFDQyxPQUFPLEVBQ3JEO0lBQ0QsTUFBTUMsbUJBQW1CLEdBQUcsRUFBRTtJQUM5QjtJQUNBO0lBQ0FBLG1CQUFtQixDQUFDQyxXQUFXLEdBQUcsSUFBSTs7SUFFdEM7SUFDQSxJQUFJLE1BQU0sS0FBSzVCLE9BQU8sRUFBRTtNQUN2QjJCLG1CQUFtQixDQUFDRSxRQUFRLEdBQUcsSUFBSTtJQUNwQyxDQUFDLE1BQU07TUFDTjtNQUNBRixtQkFBbUIsQ0FBQ0csWUFBWSxHQUFHLFVBQVNDLElBQUksRUFBRTtRQUNqRDs7UUFFQTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7UUFFSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O1FBRUl2Qix3QkFBd0IsQ0FDdkIsT0FBTyxFQUNQdUIsSUFBSSxDQUFDQyxhQUFhLEVBQ2xCRCxJQUFJLENBQUNFLFdBQVcsRUFDaEJGLElBQUksQ0FBQ0csVUFBVSxFQUNmSCxJQUFJLENBQUNJLFVBQVUsRUFDZkosSUFBSSxDQUFDSyxtQkFBbUIsQ0FDeEI7TUFDRixDQUFDO0lBQ0Y7O0lBRUE7SUFDQSxJQUNDLFdBQVcsS0FDVixPQUFPWiw4QkFBOEIsQ0FBQ0MsTUFBTSxDQUFDWSxjQUFjLElBQzVELEdBQUcsS0FBS2IsOEJBQThCLENBQUNDLE1BQU0sQ0FBQ1ksY0FBYyxFQUMzRDtNQUNEVixtQkFBbUIsQ0FBQ1UsY0FBYyxHQUNqQ2IsOEJBQThCLENBQUNDLE1BQU0sQ0FBQ1ksY0FBYztJQUN0RDs7SUFFQTtJQUNBLElBQ0MsV0FBVyxLQUNWLE9BQU9iLDhCQUE4QixDQUFDQyxNQUFNLENBQUNhLFVBQVUsSUFDeEQsTUFBTSxLQUFLZCw4QkFBOEIsQ0FBQ0MsTUFBTSxDQUFDYSxVQUFVLEVBQzFEO01BQ0RYLG1CQUFtQixDQUFDVyxVQUFVLEdBQUcsS0FBSztJQUN2Qzs7SUFFQTtJQUNBLElBQ0MsV0FBVyxLQUNWLE9BQU9kLDhCQUE4QixDQUFDQyxNQUFNLENBQUNjLFdBQVcsSUFDekQsTUFBTSxLQUFLZiw4QkFBOEIsQ0FBQ0MsTUFBTSxDQUFDYyxXQUFXLEVBQzNEO01BQ0RaLG1CQUFtQixDQUFDWSxXQUFXLEdBQUcsS0FBSztJQUN4Qzs7SUFFQTtJQUNBLElBQ0MsV0FBVyxLQUNWLE9BQU9mLDhCQUE4QixDQUFDQyxNQUFNLENBQUNlLFdBQVcsSUFDekQsTUFBTSxLQUFLaEIsOEJBQThCLENBQUNDLE1BQU0sQ0FBQ2MsV0FBVyxFQUMzRDtNQUNEWixtQkFBbUIsQ0FBQ2EsV0FBVyxHQUFHLEtBQUs7SUFDeEM7O0lBRUE7SUFDQSxJQUNDLFdBQVcsS0FDVixPQUFPaEIsOEJBQThCLENBQUNDLE1BQU0sQ0FBQ1YsZUFBZSxJQUM3RCxNQUFNLEtBQUtTLDhCQUE4QixDQUFDQyxNQUFNLENBQUNWLGVBQWUsRUFDL0Q7TUFDRFksbUJBQW1CLENBQUNaLGVBQWUsR0FBRyxLQUFLO0lBQzVDOztJQUVBO0lBQ0EsSUFDQyxXQUFXLEtBQ1gsT0FBT1MsOEJBQThCLENBQUNDLE1BQU0sQ0FBQ2dCLGVBQWUsRUFDM0Q7TUFDRGQsbUJBQW1CLENBQUNlLFFBQVEsR0FBR0MsQ0FBQyxDQUFDQyxHQUFHLENBQ25DcEIsOEJBQThCLENBQUNDLE1BQU0sQ0FBQ2dCLGVBQWUsQ0FBQ0ksS0FBSyxDQUMxRCxHQUFHLENBQ0gsRUFDREYsQ0FBQyxDQUFDRyxJQUFJLENBQ047SUFDRjs7SUFFQTtJQUNBLElBQ0MsV0FBVyxLQUNWLE9BQU90Qiw4QkFBOEIsQ0FBQ0MsTUFBTSxDQUFDc0IsVUFBVSxJQUN4RCxJQUFJLEtBQUt2Qiw4QkFBOEIsQ0FBQ0MsTUFBTSxDQUFDc0IsVUFBVSxFQUN4RDtNQUNEQyxNQUFNLENBQUNDLFdBQVcsQ0FBQ3RCLG1CQUFtQixDQUFDO0lBQ3hDLENBQUMsTUFBTTtNQUNOdUIsYUFBYSxDQUFDQyxJQUFJLENBQUN4QixtQkFBbUIsQ0FBQztJQUN4QztFQUNEO0VBRUEsSUFDQyxXQUFXLEtBQUssT0FBTzFCLDJCQUEyQixDQUFDbUQsT0FBTyxJQUMxRCxJQUFJLEtBQUtuRCwyQkFBMkIsQ0FBQ21ELE9BQU8sQ0FBQzFCLE9BQU8sRUFDbkQ7SUFDRDtJQUNBaUIsQ0FBQyxDQUFDLGlDQUFpQyxHQUFHVSxRQUFRLENBQUNDLE1BQU0sR0FBRyxLQUFLLENBQUMsQ0FBQ0MsS0FBSyxDQUNuRSxZQUFZO01BQ1gvQyx3QkFBd0IsQ0FDdkIsT0FBTyxFQUNQLGdCQUFnQixFQUNoQixPQUFPLEVBQ1AsSUFBSSxDQUFDZ0QsSUFBSSxDQUNUO0lBQ0YsQ0FBQyxDQUNEOztJQUVEO0lBQ0FiLENBQUMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDWSxLQUFLLENBQUMsWUFBWTtNQUN4Qy9DLHdCQUF3QixDQUN2QixPQUFPLEVBQ1AsT0FBTyxFQUNQLE9BQU8sRUFDUCxJQUFJLENBQUNnRCxJQUFJLENBQUNDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FDdEI7SUFDRixDQUFDLENBQUM7O0lBRUY7SUFDQWQsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLENBQUNZLEtBQUssQ0FBQyxZQUFZO01BQ3JDL0Msd0JBQXdCLENBQ3ZCLE9BQU8sRUFDUCxXQUFXLEVBQ1gsTUFBTSxFQUNOLElBQUksQ0FBQ2dELElBQUksQ0FBQ0MsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUN0QjtJQUNGLENBQUMsQ0FBQzs7SUFFRjtJQUNBZCxDQUFDLENBQ0Esa0VBQWtFLENBQ2xFLENBQUNZLEtBQUssQ0FBQyxZQUFZO01BQ25CO01BQ0EsSUFBSSxFQUFFLEtBQUt0RCwyQkFBMkIsQ0FBQ21ELE9BQU8sQ0FBQ00sY0FBYyxFQUFFO1FBQzlELE1BQU1DLEdBQUcsR0FBRyxJQUFJLENBQUNILElBQUk7UUFDckIsTUFBTUksYUFBYSxHQUFHLElBQUlDLE1BQU0sQ0FDL0IsTUFBTSxHQUNMNUQsMkJBQTJCLENBQUNtRCxPQUFPLENBQUNNLGNBQWMsR0FDbEQsYUFBYSxFQUNkLEdBQUcsQ0FDSDtRQUNELE1BQU1JLFVBQVUsR0FBR0YsYUFBYSxDQUFDRyxJQUFJLENBQUNKLEdBQUcsQ0FBQztRQUMxQyxJQUFJLElBQUksS0FBS0csVUFBVSxFQUFFO1VBQ3hCLE1BQU1FLHNCQUFzQixHQUFHLElBQUlILE1BQU0sQ0FDeEMsTUFBTSxHQUNMNUQsMkJBQTJCLENBQUNtRCxPQUFPLENBQUNNLGNBQWMsR0FDbEQsYUFBYSxFQUNkLEdBQUcsQ0FDSDtVQUNELE1BQU1PLGVBQWUsR0FBR0Qsc0JBQXNCLENBQUNFLElBQUksQ0FBQ1AsR0FBRyxDQUFDO1VBQ3hELElBQUlRLFNBQVMsR0FBRyxFQUFFO1VBQ2xCLElBQUksSUFBSSxLQUFLRixlQUFlLEVBQUU7WUFDN0JFLFNBQVMsR0FBR0YsZUFBZSxDQUFDLENBQUMsQ0FBQztVQUMvQixDQUFDLE1BQU07WUFDTkUsU0FBUyxHQUFHRixlQUFlO1VBQzVCO1VBQ0E7VUFDQXpELHdCQUF3QixDQUN2QixPQUFPLEVBQ1AsV0FBVyxFQUNYMkQsU0FBUyxFQUNULElBQUksQ0FBQ1gsSUFBSSxDQUNUO1FBQ0Y7TUFDRDtJQUNELENBQUMsQ0FBQztFQUNIO0VBRUEsSUFDQyxXQUFXLEtBQUssT0FBT3ZELDJCQUEyQixDQUFDbUUsU0FBUyxJQUM1RCxJQUFJLEtBQUtuRSwyQkFBMkIsQ0FBQ21FLFNBQVMsQ0FBQzFDLE9BQU8sRUFDckQ7SUFDRDtJQUNBaUIsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDWSxLQUFLLENBQUMsWUFBWTtNQUN4QixNQUFNSSxHQUFHLEdBQUcsSUFBSSxDQUFDSCxJQUFJO01BQ3JCO01BQ0EsSUFBSSxFQUFFLEtBQUt2RCwyQkFBMkIsQ0FBQ21FLFNBQVMsQ0FBQ0MsZUFBZSxFQUFFO1FBQ2pFLE1BQU1DLGNBQWMsR0FBRyxJQUFJVCxNQUFNLENBQ2hDLE1BQU0sR0FDTDVELDJCQUEyQixDQUFDbUUsU0FBUyxDQUFDQyxlQUFlLEdBQ3JELGFBQWEsRUFDZCxHQUFHLENBQ0g7UUFDRCxNQUFNRSxXQUFXLEdBQUdELGNBQWMsQ0FBQ1AsSUFBSSxDQUFDSixHQUFHLENBQUM7UUFDNUMsSUFBSSxJQUFJLEtBQUtZLFdBQVcsRUFBRTtVQUN6Qi9ELHdCQUF3QixDQUN2QixPQUFPLEVBQ1AsV0FBVyxFQUNYLE9BQU8sRUFDUCxJQUFJLENBQUNnRCxJQUFJLENBQ1Q7UUFDRjtNQUNEO0lBQ0QsQ0FBQyxDQUFDO0VBQ0g7O0VBRUE7RUFDQTtFQUNBLElBQ0MsV0FBVyxLQUFLLE9BQU92RCwyQkFBMkIsQ0FBQ3VFLFFBQVEsSUFDM0QsSUFBSSxLQUFLdkUsMkJBQTJCLENBQUN1RSxRQUFRLENBQUM5QyxPQUFPLEVBQ3BEO0lBQ0QrQyxNQUFNLENBQUNDLFlBQVksR0FBRyxZQUFZO01BQ2pDLE1BQU1DLFdBQVcsR0FDaEJDLFFBQVEsQ0FBQ0MsUUFBUSxHQUFHRCxRQUFRLENBQUNFLE1BQU0sR0FBR0YsUUFBUSxDQUFDRyxJQUFJO01BQ3BELElBQUksTUFBTSxLQUFLL0UsT0FBTyxFQUFFO1FBQ3ZCRyxJQUFJLENBQUMsS0FBSyxFQUFFLFdBQVcsRUFBRXdFLFdBQVcsQ0FBQztRQUNyQ3hFLElBQUksQ0FBQyxPQUFPLEVBQUUsV0FBVyxDQUFDO01BQzNCLENBQUMsTUFBTSxJQUFJLElBQUksS0FBS0gsT0FBTyxFQUFFO1FBQzVCSSxFQUFFLENBQUMsTUFBTSxFQUFFLFVBQVUsRUFBRXVFLFdBQVcsQ0FBQztNQUNwQztJQUNELENBQUM7RUFDRjs7RUFFQTtFQUNBaEMsQ0FBQyxDQUFDLDZDQUE2QyxDQUFDLENBQUNxQyxFQUFFLENBQUMsT0FBTyxFQUFFLFlBQVk7SUFDeEUsTUFBTUMsSUFBSSxHQUFHdEMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDdUMsT0FBTyxDQUFDLFlBQVksQ0FBQztJQUMxQ3ZDLENBQUMsQ0FBQ3NDLElBQUksQ0FBQyxDQUFDbEQsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUM7RUFDN0IsQ0FBQyxDQUFDOztFQUVGO0VBQ0EsSUFDQyxXQUFXLEtBQUssT0FBTzlCLDJCQUEyQixDQUFDa0YsZ0JBQWdCLElBQ25FLElBQUksS0FBS2xGLDJCQUEyQixDQUFDa0YsZ0JBQWdCLENBQUN6RCxPQUFPLEVBQzVEO0lBQ0RpQixDQUFDLENBQUMsTUFBTSxDQUFDLENBQUN5QyxNQUFNLENBQUMsWUFBWTtNQUM1QixNQUFNQyxNQUFNLEdBQ1gxQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUNaLElBQUksQ0FBQyxRQUFRLENBQUMsSUFDdEJZLENBQUMsQ0FBQyw2Q0FBNkMsQ0FBQyxDQUFDMkMsR0FBRyxDQUFDLENBQUMsQ0FBQztNQUN4RCxNQUFNM0UsUUFBUSxHQUFHZ0MsQ0FBQyxDQUFDMEMsTUFBTSxDQUFDLENBQUN0RCxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksTUFBTTtNQUN4RCxNQUFNbkIsTUFBTSxHQUFHK0IsQ0FBQyxDQUFDMEMsTUFBTSxDQUFDLENBQUN0RCxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksUUFBUTtNQUN0RCxNQUFNbEIsS0FBSyxHQUNWOEIsQ0FBQyxDQUFDMEMsTUFBTSxDQUFDLENBQUN0RCxJQUFJLENBQUMsVUFBVSxDQUFDLElBQzFCWSxDQUFDLENBQUMwQyxNQUFNLENBQUMsQ0FBQ0UsSUFBSSxFQUFFLElBQ2hCRixNQUFNLENBQUN2RSxLQUFLLElBQ1p1RSxNQUFNLENBQUNHLElBQUk7TUFDWmhGLHdCQUF3QixDQUFDLE9BQU8sRUFBRUcsUUFBUSxFQUFFQyxNQUFNLEVBQUVDLEtBQUssQ0FBQztJQUMzRCxDQUFDLENBQUM7RUFDSDtBQUNEO0FBRUE4QixDQUFDLENBQUNVLFFBQVEsQ0FBQyxDQUFDb0MsS0FBSyxDQUFDLFlBQVk7RUFDN0JsRSx3QkFBd0IsRUFBRTtBQUMzQixDQUFDLENBQUMiLCJmaWxlIjoid3AtYW5hbHl0aWNzLXRyYWNraW5nLWdlbmVyYXRvci1mcm9udC1lbmQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiB3cEFuYWx5dGljc0NoZWNrQW5hbHl0aWNzVmVyc2lvbigpIHtcblx0bGV0IHZlcnNpb24gPSAnJztcblx0aWYgKFxuXHRcdCd1bmRlZmluZWQnICE9PSB0eXBlb2YgYW5hbHl0aWNzX3RyYWNraW5nX3NldHRpbmdzICYmXG5cdFx0J3VuZGVmaW5lZCcgIT09IHR5cGVvZiBhbmFseXRpY3NfdHJhY2tpbmdfc2V0dGluZ3MuYW5hbHl0aWNzX3R5cGVcblx0KSB7XG5cdFx0aWYgKFxuXHRcdFx0J2d0YWdqcycgPT09IGFuYWx5dGljc190cmFja2luZ19zZXR0aW5ncy5hbmFseXRpY3NfdHlwZSAmJlxuXHRcdFx0J2Z1bmN0aW9uJyA9PT0gdHlwZW9mIGd0YWdcblx0XHQpIHtcblx0XHRcdHZlcnNpb24gPSAnZ3RhZyc7XG5cdFx0fSBlbHNlIGlmIChcblx0XHRcdCdhbmFseXRpY3NqcycgPT09IGFuYWx5dGljc190cmFja2luZ19zZXR0aW5ncy5hbmFseXRpY3NfdHlwZSAmJlxuXHRcdFx0J2Z1bmN0aW9uJyA9PT0gdHlwZW9mIGdhXG5cdFx0KSB7XG5cdFx0XHR2ZXJzaW9uID0gJ2dhJztcblx0XHR9XG5cdH1cblx0cmV0dXJuIHZlcnNpb247XG59XG5cbi8qXG4gKiBjYWxsIGhvb2tzIGZyb20gb3RoZXIgcGx1Z2lucyBvciB0aGVtZXNcbiAqXG4gKi9cbmlmICh0eXBlb2Ygd3AgIT09ICd1bmRlZmluZWQnKSB7XG5cdHdwLmhvb2tzLmFkZEFjdGlvbihcblx0XHQnd3BBbmFseXRpY3NUcmFja2luZ0dlbmVyYXRvckV2ZW50Jyxcblx0XHQnd3BBbmFseXRpY3NUcmFja2luZ0dlbmVyYXRvcicsXG5cdFx0d3BBbmFseXRpY3NUcmFja2luZ0V2ZW50LFxuXHRcdDEwXG5cdCk7XG5cdHdwLmhvb2tzLmFkZEFjdGlvbihcblx0XHQnd3BBbmFseXRpY3NUcmFja2luZ0dlbmVyYXRvckVjb21tZXJjZUFjdGlvbicsXG5cdFx0J3dwQW5hbHl0aWNzVHJhY2tpbmdHZW5lcmF0b3InLFxuXHRcdHdwQW5hbHl0aWNzVHJhY2tpbmdFY29tbWVyY2VBY3Rpb24sXG5cdFx0MTBcblx0KTtcbn1cblxuLypcbiAqIENyZWF0ZSBhIEdvb2dsZSBBbmFseXRpY3MgZXZlbnRcbiAqIGNhdGVnb3J5OiBFdmVudCBDYXRlZ29yeVxuICogbGFiZWw6IEV2ZW50IExhYmVsXG4gKiBhY3Rpb246IEV2ZW50IEFjdGlvblxuICogdmFsdWU6IG9wdGlvbmFsXG4gKi9cbmZ1bmN0aW9uIHdwQW5hbHl0aWNzVHJhY2tpbmdFdmVudChcblx0dHlwZSxcblx0Y2F0ZWdvcnksXG5cdGFjdGlvbixcblx0bGFiZWwsXG5cdHZhbHVlLFxuXHRub25faW50ZXJhY3Rpb25cbikge1xuXHRjb25zdCB2ZXJzaW9uID0gd3BBbmFseXRpY3NDaGVja0FuYWx5dGljc1ZlcnNpb24oKTtcblx0aWYgKCdndGFnJyA9PT0gdmVyc2lvbikge1xuXHRcdC8vIFNlbmRzIHRoZSBldmVudCB0byB0aGUgR29vZ2xlIEFuYWx5dGljcyBwcm9wZXJ0eSB3aXRoXG5cdFx0Ly8gdHJhY2tpbmcgSUQgR0FfTUVBU1VSRU1FTlRfSUQgc2V0IGJ5IHRoZSBjb25maWcgY29tbWFuZCBpblxuXHRcdC8vIHRoZSBnbG9iYWwgdHJhY2tpbmcgc25pcHBldC5cblx0XHQvLyBleGFtcGxlOiBndGFnKCdldmVudCcsICdwbGF5JywgeyAnZXZlbnRfY2F0ZWdvcnknOiAnVmlkZW9zJywgJ2V2ZW50X2xhYmVsJzogJ0ZhbGwgQ2FtcGFpZ24nIH0pO1xuXHRcdGNvbnN0IHBhcmFtcyA9IHtcblx0XHRcdGV2ZW50X2NhdGVnb3J5OiBjYXRlZ29yeSxcblx0XHRcdGV2ZW50X2xhYmVsOiBsYWJlbCxcblx0XHR9O1xuXHRcdGlmICgndW5kZWZpbmVkJyAhPT0gdHlwZW9mIHZhbHVlKSB7XG5cdFx0XHRwYXJhbXMudmFsdWUgPSB2YWx1ZTtcblx0XHR9XG5cdFx0aWYgKCd1bmRlZmluZWQnICE9PSB0eXBlb2Ygbm9uX2ludGVyYWN0aW9uKSB7XG5cdFx0XHRwYXJhbXMubm9uX2ludGVyYWN0aW9uID0gbm9uX2ludGVyYWN0aW9uO1xuXHRcdH1cblx0XHRndGFnKHR5cGUsIGFjdGlvbiwgcGFyYW1zKTtcblx0fSBlbHNlIGlmICgnZ2EnID09PSB2ZXJzaW9uKSB7XG5cdFx0Ly8gVXNlcyB0aGUgZGVmYXVsdCB0cmFja2VyIHRvIHNlbmQgdGhlIGV2ZW50IHRvIHRoZVxuXHRcdC8vIEdvb2dsZSBBbmFseXRpY3MgcHJvcGVydHkgd2l0aCB0cmFja2luZyBJRCBHQV9NRUFTVVJFTUVOVF9JRC5cblx0XHQvLyBleGFtcGxlOiBnYSgnc2VuZCcsICdldmVudCcsICdWaWRlb3MnLCAncGxheScsICdGYWxsIENhbXBhaWduJyk7XG5cdFx0Ly8gbm9uaW50ZXJhY3Rpb24gc2VlbXMgdG8gaGF2ZSBiZWVuIHdvcmtpbmcgbGlrZSB0aGlzIGluIGFuYWx5dGljcy5qcy5cblx0XHRpZiAobm9uX2ludGVyYWN0aW9uID09PSAxKSB7XG5cdFx0XHR2YWx1ZSA9IHsgbm9uSW50ZXJhY3Rpb246IDEgfTtcblx0XHR9XG5cdFx0aWYgKCd1bmRlZmluZWQnID09PSB0eXBlb2YgdmFsdWUpIHtcblx0XHRcdGdhKCdzZW5kJywgdHlwZSwgY2F0ZWdvcnksIGFjdGlvbiwgbGFiZWwpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRnYSgnc2VuZCcsIHR5cGUsIGNhdGVnb3J5LCBhY3Rpb24sIGxhYmVsLCB2YWx1ZSk7XG5cdFx0fVxuXHR9XG59XG5cbi8qXG4gKiBDcmVhdGUgYSBHb29nbGUgQW5hbHl0aWNzIEVjb21tZXJjZSBhY3Rpb25cbiAqXG4gKi9cbmZ1bmN0aW9uIHdwQW5hbHl0aWNzVHJhY2tpbmdFY29tbWVyY2VBY3Rpb24odHlwZSwgYWN0aW9uLCBwcm9kdWN0LCBzdGVwKSB7XG5cdGNvbnN0IHZlcnNpb24gPSB3cEFuYWx5dGljc0NoZWNrQW5hbHl0aWNzVmVyc2lvbigpO1xuXHRpZiAoJ2d0YWcnID09PSB2ZXJzaW9uKSB7XG5cdFx0Z3RhZyh0eXBlLCBhY3Rpb24sIHtcblx0XHRcdGl0ZW1zOiBbcHJvZHVjdF0sXG5cdFx0fSk7XG5cdH0gZWxzZSBpZiAoJ2dhJyA9PT0gdmVyc2lvbikge1xuXHRcdGdhKCdyZXF1aXJlJywgJ2VjJyk7XG5cdFx0Z2EoJ2VjOmFkZFByb2R1Y3QnLCBwcm9kdWN0KTtcblx0XHRzd2l0Y2ggKGFjdGlvbikge1xuXHRcdFx0Y2FzZSAnc2VsZWN0X2NvbnRlbnQnOlxuXHRcdFx0XHRnYSgnZWM6c2V0QWN0aW9uJywgJ2RldGFpbCcpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ2FkZF90b19jYXJ0Jzpcblx0XHRcdFx0Z2EoJ2VjOnNldEFjdGlvbicsICdhZGQnKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdiZWdpbl9jaGVja291dCc6XG5cdFx0XHRcdGdhKCdlYzpzZXRBY3Rpb24nLCAnY2hlY2tvdXQnLCB7XG5cdFx0XHRcdFx0c3RlcCxcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDpcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gd3BBbmFseXRpY3NUcmFja2luZ1NldHVwKCkge1xuXHRjb25zdCB2ZXJzaW9uID0gd3BBbmFseXRpY3NDaGVja0FuYWx5dGljc1ZlcnNpb24oKTtcblx0aWYgKCcnID09PSB2ZXJzaW9uKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Ly8gc2V0dGluZ3MgZm9yIFNjcm9sbERlcHRoIHBsdWdpblxuXHRpZiAoXG5cdFx0J3VuZGVmaW5lZCcgIT09IHR5cGVvZiBhbmFseXRpY3Nfc2Nyb2xsZGVwdGhfc2V0dGluZ3Muc2Nyb2xsICYmXG5cdFx0dHJ1ZSA9PT0gYW5hbHl0aWNzX3Njcm9sbGRlcHRoX3NldHRpbmdzLnNjcm9sbC5lbmFibGVkXG5cdCkge1xuXHRcdGNvbnN0IHNjcm9sbERlcHRoU2V0dGluZ3MgPSBbXTtcblx0XHQvLyB0aGlzIG5lZWRzIHRvIGJlIHRydWUsIHJlZ2FyZGxlc3MsIGJlY2F1c2Ugb3RoZXJ3aXNlIHRoZSBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlIHRyYWNraW5nIGlzIGRlZmluZWQgaW4gR29vZ2xlIFRhZyBNYW5hZ2VyLlxuXHRcdC8vIHRvZG86IGl0IG1pZ2h0IGJlIHdvcnRoIGJ1aWxkaW5nIGEgc2V0dGluZyBmb3IgdGhpcy5cblx0XHRzY3JvbGxEZXB0aFNldHRpbmdzLmd0bU92ZXJyaWRlID0gdHJ1ZTtcblxuXHRcdC8vIGlmIHdlJ3JlIHVzaW5nIGdhLCB3ZSBuZWVkIHRvIHRlbGwgdGhlIHBsdWdpblxuXHRcdGlmICgnZ3RhZycgIT09IHZlcnNpb24pIHtcblx0XHRcdHNjcm9sbERlcHRoU2V0dGluZ3MuZ2FHbG9iYWwgPSAnZ2EnO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBpbiBndGFnLCB3ZSBzZXQgb3VyIG93biBjYWxsYmFjayBzbyB3ZSBjYW4gZGVhbCB3aXRoIEdvb2dsZSBBbmFseXRpY3MgNC5cblx0XHRcdHNjcm9sbERlcHRoU2V0dGluZ3MuZXZlbnRIYW5kbGVyID0gZnVuY3Rpb24oZGF0YSkge1xuXHRcdFx0XHQvL2NvbnNvbGUubG9nKGRhdGEpO1xuXG5cdFx0XHRcdC8qIHByZXZpb3VzIGRlZmF1bHRcblx0XHRcdFx0Z3RhZygnZXZlbnQnLCBhY3Rpb24sIHtcblx0XHRcdFx0XHQnZXZlbnRfY2F0ZWdvcnknOiAnU2Nyb2xsIERlcHRoJyxcblx0XHRcdFx0XHQnZXZlbnRfbGFiZWwnOiBsYWJlbCxcblx0XHRcdFx0XHQndmFsdWUnOiAxLFxuXHRcdFx0XHRcdCdub25faW50ZXJhY3Rpb24nOiBvcHRpb25zLm5vbkludGVyYWN0aW9uXG5cdFx0XHRcdH0pOyovXG5cblx0XHRcdFx0LyogcGFyYW1ldGVyc1xuXHRcdFx0XHRmdW5jdGlvbiB3cEFuYWx5dGljc1RyYWNraW5nRXZlbnQoXG5cdFx0XHRcdFx0dHlwZSxcblx0XHRcdFx0XHRjYXRlZ29yeSxcblx0XHRcdFx0XHRhY3Rpb24sXG5cdFx0XHRcdFx0bGFiZWwsXG5cdFx0XHRcdFx0dmFsdWUsXG5cdFx0XHRcdFx0bm9uX2ludGVyYWN0aW9uXG5cdFx0XHRcdCkgKi9cblxuXHRcdFx0XHR3cEFuYWx5dGljc1RyYWNraW5nRXZlbnQoXG5cdFx0XHRcdFx0J2V2ZW50Jyxcblx0XHRcdFx0XHRkYXRhLmV2ZW50Q2F0ZWdvcnksXG5cdFx0XHRcdFx0ZGF0YS5ldmVudEFjdGlvbixcblx0XHRcdFx0XHRkYXRhLmV2ZW50TGFiZWwsXG5cdFx0XHRcdFx0ZGF0YS5ldmVudFZhbHVlLFxuXHRcdFx0XHRcdGRhdGEuZXZlbnROb25JbnRlcmFjdGlvblxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIHZhbHVlIGlzIGEgc3RyaW5nXG5cdFx0aWYgKFxuXHRcdFx0J3VuZGVmaW5lZCcgIT09XG5cdFx0XHRcdHR5cGVvZiBhbmFseXRpY3Nfc2Nyb2xsZGVwdGhfc2V0dGluZ3Muc2Nyb2xsLm1pbmltdW1faGVpZ2h0ICYmXG5cdFx0XHQnMCcgIT09IGFuYWx5dGljc19zY3JvbGxkZXB0aF9zZXR0aW5ncy5zY3JvbGwubWluaW11bV9oZWlnaHRcblx0XHQpIHtcblx0XHRcdHNjcm9sbERlcHRoU2V0dGluZ3MubWluaW11bV9oZWlnaHQgPVxuXHRcdFx0XHRhbmFseXRpY3Nfc2Nyb2xsZGVwdGhfc2V0dGluZ3Muc2Nyb2xsLm1pbmltdW1faGVpZ2h0O1xuXHRcdH1cblxuXHRcdC8vIHZhbHVlIGlzIGEgYm9vbGVhbi4gZGVmYXVsdCBpcyB0cnVlLlxuXHRcdGlmIChcblx0XHRcdCd1bmRlZmluZWQnICE9PVxuXHRcdFx0XHR0eXBlb2YgYW5hbHl0aWNzX3Njcm9sbGRlcHRoX3NldHRpbmdzLnNjcm9sbC5wZXJjZW50YWdlICYmXG5cdFx0XHQndHJ1ZScgIT09IGFuYWx5dGljc19zY3JvbGxkZXB0aF9zZXR0aW5ncy5zY3JvbGwucGVyY2VudGFnZVxuXHRcdCkge1xuXHRcdFx0c2Nyb2xsRGVwdGhTZXR0aW5ncy5wZXJjZW50YWdlID0gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Ly8gdmFsdWUgaXMgYSBib29sZWFuLiBkZWZhdWx0IGlzIHRydWUuXG5cdFx0aWYgKFxuXHRcdFx0J3VuZGVmaW5lZCcgIT09XG5cdFx0XHRcdHR5cGVvZiBhbmFseXRpY3Nfc2Nyb2xsZGVwdGhfc2V0dGluZ3Muc2Nyb2xsLnVzZXJfdGltaW5nICYmXG5cdFx0XHQndHJ1ZScgIT09IGFuYWx5dGljc19zY3JvbGxkZXB0aF9zZXR0aW5ncy5zY3JvbGwudXNlcl90aW1pbmdcblx0XHQpIHtcblx0XHRcdHNjcm9sbERlcHRoU2V0dGluZ3MudXNlcl90aW1pbmcgPSBmYWxzZTtcblx0XHR9XG5cblx0XHQvLyB2YWx1ZSBpcyBhIGJvb2xlYW4uIGRlZmF1bHQgaXMgdHJ1ZS5cblx0XHRpZiAoXG5cdFx0XHQndW5kZWZpbmVkJyAhPT1cblx0XHRcdFx0dHlwZW9mIGFuYWx5dGljc19zY3JvbGxkZXB0aF9zZXR0aW5ncy5zY3JvbGwucGl4ZWxfZGVwdGggJiZcblx0XHRcdCd0cnVlJyAhPT0gYW5hbHl0aWNzX3Njcm9sbGRlcHRoX3NldHRpbmdzLnNjcm9sbC51c2VyX3RpbWluZ1xuXHRcdCkge1xuXHRcdFx0c2Nyb2xsRGVwdGhTZXR0aW5ncy5waXhlbF9kZXB0aCA9IGZhbHNlO1xuXHRcdH1cblxuXHRcdC8vIHZhbHVlIGlzIGEgYm9vbGVhbi4gZGVmYXVsdCBpcyB0cnVlLlxuXHRcdGlmIChcblx0XHRcdCd1bmRlZmluZWQnICE9PVxuXHRcdFx0XHR0eXBlb2YgYW5hbHl0aWNzX3Njcm9sbGRlcHRoX3NldHRpbmdzLnNjcm9sbC5ub25faW50ZXJhY3Rpb24gJiZcblx0XHRcdCd0cnVlJyAhPT0gYW5hbHl0aWNzX3Njcm9sbGRlcHRoX3NldHRpbmdzLnNjcm9sbC5ub25faW50ZXJhY3Rpb25cblx0XHQpIHtcblx0XHRcdHNjcm9sbERlcHRoU2V0dGluZ3Mubm9uX2ludGVyYWN0aW9uID0gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Ly8gdmFsdWUgaXMgYW4gYXJyYXkuIGRlZmF1bHQgaXMgZW1wdHkuXG5cdFx0aWYgKFxuXHRcdFx0J3VuZGVmaW5lZCcgIT09XG5cdFx0XHR0eXBlb2YgYW5hbHl0aWNzX3Njcm9sbGRlcHRoX3NldHRpbmdzLnNjcm9sbC5zY3JvbGxfZWxlbWVudHNcblx0XHQpIHtcblx0XHRcdHNjcm9sbERlcHRoU2V0dGluZ3MuZWxlbWVudHMgPSAkLm1hcChcblx0XHRcdFx0YW5hbHl0aWNzX3Njcm9sbGRlcHRoX3NldHRpbmdzLnNjcm9sbC5zY3JvbGxfZWxlbWVudHMuc3BsaXQoXG5cdFx0XHRcdFx0JywnXG5cdFx0XHRcdCksXG5cdFx0XHRcdCQudHJpbVxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHQvLyBzZW5kIHNjcm9sbCBzZXR0aW5ncyB0byB0aGUgc2Nyb2xsZGVwdGggcGx1Z2luXG5cdFx0aWYgKFxuXHRcdFx0J3VuZGVmaW5lZCcgIT09XG5cdFx0XHRcdHR5cGVvZiBhbmFseXRpY3Nfc2Nyb2xsZGVwdGhfc2V0dGluZ3Muc2Nyb2xsLnVzZV9qcXVlcnkgJiZcblx0XHRcdHRydWUgPT09IGFuYWx5dGljc19zY3JvbGxkZXB0aF9zZXR0aW5ncy5zY3JvbGwudXNlX2pxdWVyeVxuXHRcdCkge1xuXHRcdFx0alF1ZXJ5LnNjcm9sbERlcHRoKHNjcm9sbERlcHRoU2V0dGluZ3MpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRnYXNjcm9sbGRlcHRoLmluaXQoc2Nyb2xsRGVwdGhTZXR0aW5ncyk7XG5cdFx0fVxuXHR9XG5cblx0aWYgKFxuXHRcdCd1bmRlZmluZWQnICE9PSB0eXBlb2YgYW5hbHl0aWNzX3RyYWNraW5nX3NldHRpbmdzLnNwZWNpYWwgJiZcblx0XHR0cnVlID09PSBhbmFseXRpY3NfdHJhY2tpbmdfc2V0dGluZ3Muc3BlY2lhbC5lbmFibGVkXG5cdCkge1xuXHRcdC8vIGV4dGVybmFsIGxpbmtzXG5cdFx0JCgnYVtocmVmXj1cImh0dHBcIl06bm90KFtocmVmKj1cIjovLycgKyBkb2N1bWVudC5kb21haW4gKyAnXCJdKScpLmNsaWNrKFxuXHRcdFx0ZnVuY3Rpb24gKCkge1xuXHRcdFx0XHR3cEFuYWx5dGljc1RyYWNraW5nRXZlbnQoXG5cdFx0XHRcdFx0J2V2ZW50Jyxcblx0XHRcdFx0XHQnT3V0Ym91bmQgbGlua3MnLFxuXHRcdFx0XHRcdCdDbGljaycsXG5cdFx0XHRcdFx0dGhpcy5ocmVmXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0KTtcblxuXHRcdC8vIG1haWx0byBsaW5rc1xuXHRcdCQoJ2FbaHJlZl49XCJtYWlsdG9cIl0nKS5jbGljayhmdW5jdGlvbiAoKSB7XG5cdFx0XHR3cEFuYWx5dGljc1RyYWNraW5nRXZlbnQoXG5cdFx0XHRcdCdldmVudCcsXG5cdFx0XHRcdCdNYWlscycsXG5cdFx0XHRcdCdDbGljaycsXG5cdFx0XHRcdHRoaXMuaHJlZi5zdWJzdHJpbmcoNylcblx0XHRcdCk7XG5cdFx0fSk7XG5cblx0XHQvLyB0ZWwgbGlua3Ncblx0XHQkKCdhW2hyZWZePVwidGVsXCJdJykuY2xpY2soZnVuY3Rpb24gKCkge1xuXHRcdFx0d3BBbmFseXRpY3NUcmFja2luZ0V2ZW50KFxuXHRcdFx0XHQnZXZlbnQnLFxuXHRcdFx0XHQnVGVsZXBob25lJyxcblx0XHRcdFx0J0NhbGwnLFxuXHRcdFx0XHR0aGlzLmhyZWYuc3Vic3RyaW5nKDcpXG5cdFx0XHQpO1xuXHRcdH0pO1xuXG5cdFx0Ly8gaW50ZXJuYWwgbGlua3Ncblx0XHQkKFxuXHRcdFx0J2E6bm90KFtocmVmXj1cIihodHRwOnxodHRwczopPy8vXCJdLFtocmVmXj1cIiNcIl0sW2hyZWZePVwibWFpbHRvOlwiXSknXG5cdFx0KS5jbGljayhmdW5jdGlvbiAoKSB7XG5cdFx0XHQvLyB0cmFjayBkb3dubG9hZHNcblx0XHRcdGlmICgnJyAhPT0gYW5hbHl0aWNzX3RyYWNraW5nX3NldHRpbmdzLnNwZWNpYWwuZG93bmxvYWRfcmVnZXgpIHtcblx0XHRcdFx0Y29uc3QgdXJsID0gdGhpcy5ocmVmO1xuXHRcdFx0XHRjb25zdCBjaGVja0Rvd25sb2FkID0gbmV3IFJlZ0V4cChcblx0XHRcdFx0XHQnXFxcXC4oJyArXG5cdFx0XHRcdFx0XHRhbmFseXRpY3NfdHJhY2tpbmdfc2V0dGluZ3Muc3BlY2lhbC5kb3dubG9hZF9yZWdleCArXG5cdFx0XHRcdFx0XHQnKShbPyNdLiopPyQnLFxuXHRcdFx0XHRcdCdpJ1xuXHRcdFx0XHQpO1xuXHRcdFx0XHRjb25zdCBpc0Rvd25sb2FkID0gY2hlY2tEb3dubG9hZC50ZXN0KHVybCk7XG5cdFx0XHRcdGlmICh0cnVlID09PSBpc0Rvd25sb2FkKSB7XG5cdFx0XHRcdFx0Y29uc3QgY2hlY2tEb3dubG9hZEV4dGVuc2lvbiA9IG5ldyBSZWdFeHAoXG5cdFx0XHRcdFx0XHQnXFxcXC4oJyArXG5cdFx0XHRcdFx0XHRcdGFuYWx5dGljc190cmFja2luZ19zZXR0aW5ncy5zcGVjaWFsLmRvd25sb2FkX3JlZ2V4ICtcblx0XHRcdFx0XHRcdFx0JykoWz8jXS4qKT8kJyxcblx0XHRcdFx0XHRcdCdpJ1xuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0Y29uc3QgZXh0ZW5zaW9uUmVzdWx0ID0gY2hlY2tEb3dubG9hZEV4dGVuc2lvbi5leGVjKHVybCk7XG5cdFx0XHRcdFx0bGV0IGV4dGVuc2lvbiA9ICcnO1xuXHRcdFx0XHRcdGlmIChudWxsICE9PSBleHRlbnNpb25SZXN1bHQpIHtcblx0XHRcdFx0XHRcdGV4dGVuc2lvbiA9IGV4dGVuc2lvblJlc3VsdFsxXTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0ZXh0ZW5zaW9uID0gZXh0ZW5zaW9uUmVzdWx0O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQvLyB3ZSBjYW4ndCB1c2UgdGhlIHVybCBmb3IgdGhlIHZhbHVlIGhlcmUsIGV2ZW4gdGhvdWdoIHRoYXQgd291bGQgYmUgbmljZSwgYmVjYXVzZSB2YWx1ZSBpcyBzdXBwb3NlZCB0byBiZSBhbiBpbnRlZ2VyXG5cdFx0XHRcdFx0d3BBbmFseXRpY3NUcmFja2luZ0V2ZW50KFxuXHRcdFx0XHRcdFx0J2V2ZW50Jyxcblx0XHRcdFx0XHRcdCdEb3dubG9hZHMnLFxuXHRcdFx0XHRcdFx0ZXh0ZW5zaW9uLFxuXHRcdFx0XHRcdFx0dGhpcy5ocmVmXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0aWYgKFxuXHRcdCd1bmRlZmluZWQnICE9PSB0eXBlb2YgYW5hbHl0aWNzX3RyYWNraW5nX3NldHRpbmdzLmFmZmlsaWF0ZSAmJlxuXHRcdHRydWUgPT09IGFuYWx5dGljc190cmFja2luZ19zZXR0aW5ncy5hZmZpbGlhdGUuZW5hYmxlZFxuXHQpIHtcblx0XHQvLyBhbnkgbGluayBjb3VsZCBiZSBhbiBhZmZpbGlhdGUsIGkgZ3Vlc3M/XG5cdFx0JCgnYScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcblx0XHRcdGNvbnN0IHVybCA9IHRoaXMuaHJlZjtcblx0XHRcdC8vIHRyYWNrIGFmZmlsaWF0ZXNcblx0XHRcdGlmICgnJyAhPT0gYW5hbHl0aWNzX3RyYWNraW5nX3NldHRpbmdzLmFmZmlsaWF0ZS5hZmZpbGlhdGVfcmVnZXgpIHtcblx0XHRcdFx0Y29uc3QgY2hlY2tBZmZpbGlhdGUgPSBuZXcgUmVnRXhwKFxuXHRcdFx0XHRcdCdcXFxcLignICtcblx0XHRcdFx0XHRcdGFuYWx5dGljc190cmFja2luZ19zZXR0aW5ncy5hZmZpbGlhdGUuYWZmaWxpYXRlX3JlZ2V4ICtcblx0XHRcdFx0XHRcdCcpKFs/I10uKik/JCcsXG5cdFx0XHRcdFx0J2knXG5cdFx0XHRcdCk7XG5cdFx0XHRcdGNvbnN0IGlzQWZmaWxpYXRlID0gY2hlY2tBZmZpbGlhdGUudGVzdCh1cmwpO1xuXHRcdFx0XHRpZiAodHJ1ZSA9PT0gaXNBZmZpbGlhdGUpIHtcblx0XHRcdFx0XHR3cEFuYWx5dGljc1RyYWNraW5nRXZlbnQoXG5cdFx0XHRcdFx0XHQnZXZlbnQnLFxuXHRcdFx0XHRcdFx0J0FmZmlsaWF0ZScsXG5cdFx0XHRcdFx0XHQnQ2xpY2snLFxuXHRcdFx0XHRcdFx0dGhpcy5ocmVmXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0Ly8gbGluayBmcmFnbWVudHMgYXMgcGFnZXZpZXdzXG5cdC8vIGRvZXMgbm90IHVzZSB0aGUgZXZlbnQgdHJhY2tpbmcgbWV0aG9kOyBmbGFncyBhIHBhZ2V2aWV3IGluc3RlYWQuXG5cdGlmIChcblx0XHQndW5kZWZpbmVkJyAhPT0gdHlwZW9mIGFuYWx5dGljc190cmFja2luZ19zZXR0aW5ncy5mcmFnbWVudCAmJlxuXHRcdHRydWUgPT09IGFuYWx5dGljc190cmFja2luZ19zZXR0aW5ncy5mcmFnbWVudC5lbmFibGVkXG5cdCkge1xuXHRcdHdpbmRvdy5vbmhhc2hjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRjb25zdCBmcmFnbWVudFVybCA9XG5cdFx0XHRcdGxvY2F0aW9uLnBhdGhuYW1lICsgbG9jYXRpb24uc2VhcmNoICsgbG9jYXRpb24uaGFzaDtcblx0XHRcdGlmICgnZ3RhZycgPT09IHZlcnNpb24pIHtcblx0XHRcdFx0Z3RhZygnc2V0JywgJ3BhZ2VfcGF0aCcsIGZyYWdtZW50VXJsKTtcblx0XHRcdFx0Z3RhZygnZXZlbnQnLCAncGFnZV92aWV3Jyk7XG5cdFx0XHR9IGVsc2UgaWYgKCdnYScgPT09IHZlcnNpb24pIHtcblx0XHRcdFx0Z2EoJ3NlbmQnLCAncGFnZXZpZXcnLCBmcmFnbWVudFVybCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXG5cdC8vIHdoZW4gYSBidXR0b24gaXMgY2xpY2tlZCwgYXR0YWNoIGl0IHRvIHRoZSBmb3JtJ3MgZGF0YVxuXHQkKCdpbnB1dFt0eXBlPVwic3VibWl0XCJdLCBidXR0b25bdHlwZT1cInN1Ym1pdFwiXScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblx0XHRjb25zdCBmb3JtID0gJCh0aGlzKS5wYXJlbnRzKCdmb3JtOmZpcnN0Jyk7XG5cdFx0JChmb3JtKS5kYXRhKCdidXR0b24nLCB0aGlzKTtcblx0fSk7XG5cblx0Ly8gYmFzaWMgZm9ybSBzdWJtaXRzLiB0cmFjayBzdWJtaXQgaW5zdGVhZCBvZiBjbGljayBiZWNhdXNlIG90aGVyd2lzZSBpdCdzIHdlaXJkLlxuXHRpZiAoXG5cdFx0J3VuZGVmaW5lZCcgIT09IHR5cGVvZiBhbmFseXRpY3NfdHJhY2tpbmdfc2V0dGluZ3MuZm9ybV9zdWJtaXNzaW9ucyAmJlxuXHRcdHRydWUgPT09IGFuYWx5dGljc190cmFja2luZ19zZXR0aW5ncy5mb3JtX3N1Ym1pc3Npb25zLmVuYWJsZWRcblx0KSB7XG5cdFx0JCgnZm9ybScpLnN1Ym1pdChmdW5jdGlvbiAoKSB7XG5cdFx0XHRjb25zdCBidXR0b24gPVxuXHRcdFx0XHQkKHRoaXMpLmRhdGEoJ2J1dHRvbicpIHx8XG5cdFx0XHRcdCQoJ2lucHV0W3R5cGU9XCJzdWJtaXRcIl0sIGJ1dHRvblt0eXBlPVwic3VibWl0XCJdJykuZ2V0KDApO1xuXHRcdFx0Y29uc3QgY2F0ZWdvcnkgPSAkKGJ1dHRvbikuZGF0YSgnZ2EtY2F0ZWdvcnknKSB8fCAnRm9ybSc7XG5cdFx0XHRjb25zdCBhY3Rpb24gPSAkKGJ1dHRvbikuZGF0YSgnZ2EtYWN0aW9uJykgfHwgJ1N1Ym1pdCc7XG5cdFx0XHRjb25zdCBsYWJlbCA9XG5cdFx0XHRcdCQoYnV0dG9uKS5kYXRhKCdnYS1sYWJlbCcpIHx8XG5cdFx0XHRcdCQoYnV0dG9uKS50ZXh0KCkgfHxcblx0XHRcdFx0YnV0dG9uLnZhbHVlIHx8XG5cdFx0XHRcdGJ1dHRvbi5uYW1lO1xuXHRcdFx0d3BBbmFseXRpY3NUcmFja2luZ0V2ZW50KCdldmVudCcsIGNhdGVnb3J5LCBhY3Rpb24sIGxhYmVsKTtcblx0XHR9KTtcblx0fVxufVxuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG5cdHdwQW5hbHl0aWNzVHJhY2tpbmdTZXR1cCgpO1xufSk7XG4iXX0=
}(jQuery));
